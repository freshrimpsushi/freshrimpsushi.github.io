<!DOCTYPE html>
<html class="blog">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    
    

    
    <meta name="NaverBot" content="All" />
    <meta name="NaverBot" content="index,follow" />
    <meta name="Yeti" content="All" />
    <meta name="Yeti" content="index,follow" />

    
    
    <link rel="icon" href="https://freshrimpsushi.github.io/ko/logo/favicon.ico">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="logo/basic.png">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/katex.min.css"
        integrity="sha512-vJqxkZ+Sugf/6WRlpcxN01qVfX/29hF6qc33eHF1va3NgoV+U+wCi+uTAsQ10sDoGyBxHLdaHvGwDlV3yVYboA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href=https://freshrimpsushi.github.io/en/css/style.css rel="preload" as="style" onload="this.rel='stylesheet'">
    <link href=https://freshrimpsushi.github.io/en/css/comment.css rel="preload" as="style" onload="this.rel='stylesheet'">

    
    <style type="text/css">
        .thmbox {
            background: rgb(245, 245, 245);
             
            border-radius: 20px;
            padding: 20px;
        }
    </style>

    
    
    

    
    <meta name="google-site-verification" content="KYAokS7-6C5YuXOjatJQsiK1T0O8x4YncYFIF4tneYI" />
    <meta name="naver-site-verification" content="e5651d6f97899061897203413efc84994f04bbba" />

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NLV8Y9PRK1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-NLV8Y9PRK1');
    </script>

    <title>Principal Component Analysis in Statistics</title>

    
</head>

<meta name="title" content="Principal Component Analysis in Statistics">
<meta name="description"Content="Íµ≠ÎÇ¥ ÏµúÎåÄÏùò ÏàòÌïô, Î¨ºÎ¶¨Ìïô, ÌÜµÍ≥ÑÌïô Î∏îÎ°úÍ∑∏">
<meta property="og:title" content="Principal Component Analysis in Statistics"/>
<meta property="og:description" content="Pca principal components analysis in Statistics"/>
<meta property="og:image" content=https://freshrimpsushi.github.io/en/logo/basic.png/>


<link rel="canonical" href="https://freshrimpsushi.github.io/ko/"/>
<link rel="alternate" hreflang="en" href="https://freshrimpsushi.github.io/en/"/>
<link rel="alternate" hreflang="jp" href="https://freshrimpsushi.github.io/jp/"/>






<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "articleSection": "r_",
    "name": "Principal Component Analysis in Statistics",
    "headline": "Principal Component Analysis in Statistics",
    "alternativeHeadline": "",
    "description": "Pca principal components analysis in Statistics",
    "inLanguage": "en",
    "isFamilyFriendly": "true",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/freshrimpsushi.github.io\/en\/posts\/812\/"
    },
    "author" : {
        "@type": "Person",
        "name": "Î•òÎåÄÏãù"
    },
    "creator" : {
        "@type": "Person",
        "name": "Î•òÎåÄÏãù"
    },
    "accountablePerson" : {
        "@type": "Person",
        "name": "Î•òÎåÄÏãù"
    },
    "copyrightHolder" : "FreshrimpRestaurant",
    "copyrightYear" : "2019",
    "dateCreated": "2019-01-20T00:00:00.00Z",
    "datePublished": "2019-01-20T00:00:00.00Z",
    "dateModified": "2019-01-20T00:00:00.00Z",
    "publisher":{
        "@type":"Organization",
        "name": "FreshrimpRestaurant",
        "url": "https://freshrimpsushi.github.io/en/",
        "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/freshrimpsushi.github.io\/en\/logo\/basic.png",
            "width":"32",
            "height":"32"
        }
    },
    "image": "https://freshrimpsushi.github.io/en/logo/basic.png",
    "url" : "https:\/\/freshrimpsushi.github.io\/en\/posts\/812\/",
    "wordCount" : "1091",
    "genre" : [ ],
    "keywords" : [ ]
}
</script>


<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<script src="https://use.fontawesome.com/releases/v6.5.1/js/all.js"></script>

<script src=https://freshrimpsushi.github.io/en/js/common.js></script>

<body class="main">
  <header>
    <a href= https://freshrimpsushi.github.io/en/ rel="home">
        <p style="text-align:center; font-size: 1rem; color: black;">
            
                <img src=https://freshrimpsushi.github.io/en/logo/%ED%86%B5%EA%B3%84%EC%A0%81%EB%B6%84%EC%84%9D.png style="height: auto; max-width: 16%;">
            
            
            
        </p>
    </a>
</header>

   
<script type="text/javascript">
    var goIndex = function(){
        var idx = document.getElementsByName("idx")[0].value;
        var local_idx = 'https:\/\/freshrimpsushi.github.io\/en\/' + "posts/" + idx;
        location.replace(local_idx)
    }
</script>



  <script>
  document.addEventListener("DOMContentLoaded", () => {
    fetch('https://api64.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {
        return data.ip
      })
      .then(ip => {
        const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/ip_checker.php';
        return postFetch(url, { user_ip: ip });
      })
      .then(res => res.json())
      .then(data => {
        if (!data.ok) {
          alert('Ï∞®Îã®Îêú IPÏûÖÎãàÎã§.\nContact:\nfreshrimpsushi@gmail.com')
          window.location.href = 'https://google.com';
        }
      })
      .catch(err => console.error(err));
  });
</script>
  <form method="get" action="/en/search" style="border: 1px; text-align: center;">
    <div class="field">
    <input type="text" id="searchtext" placeholder = "üîçÔ∏é" class="input_text" name="s"
    style="background-color: #EEEEEE; text-align: center; width: 200px; font-size: 1.5rem;
    border: 1px; border-radius: 5px; padding-top:5px; padding-bottom:5px; margin-bottom: 1.5rem">
    </div>
</form>
  <div style="text-align: center;">
    
    <a href="javascript:void(0);" onclick="changeLanguage('ko')">ÌïúÍµ≠Ïñ¥</a> |
    <a href="javascript:void(0);" onclick="changeLanguage('en')">English</a> |
    <a href="javascript:void(0);" onclick="changeLanguage('jp')">Êó•Êú¨Ë™û</a>
</div>

<script>
    function changeLanguage(languageCode) {
        
        var currentUrl = window.location.href;

        var newUrl = currentUrl.replace(/\/(ko|en|jp)\//i, '/' + languageCode + '/');
        
        if (currentUrl.includes('localhost')) {
            
            var port;
            switch (languageCode) {
                case 'ko':
                    port = 1313;
                    break;
                case 'en':
                    port = 1314;
                    break;
                case 'jp':
                    port = 1315;
                    break;
                default:
                    port = 1313; 
            }

            

            
            newUrl = 'http://localhost:' + port + '/' + languageCode + '/' + newUrl.split('/' + languageCode + '/')[1];
        }
        window.location.href = newUrl;
    }
</script>
  
  
  <div class="wrapper">
    <div class="content">
      <div class="content-box">
        
<title>Principal Component Analysis in Statistics</title>




        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <a href="https://freshrimpsushi.github.io/en/categories/%ED%86%B5%EA%B3%84%EC%A0%81%EB%B6%84%EC%84%9D/"
            style="background-color: rgba(0, 0, 0, 0.8); color: orange;
            border-radius:10px; padding: 5px;">
            üìÇStatistical Analysis</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        


<h1>Principal Component Analysis in Statistics</h1>


<aside>
  <div class="innerheader">
    <div class="innertoc">
      <b>Table of Contents</b>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#derivation-1">Derivation </a></li>
    <li><a href="#limitations">Limitations</a></li>
    <li><a href="#condition-number-1">Condition Number </a></li>
    <li><a href="#see-also">See Also</a></li>
  </ul>
</nav>
    </div>    
  </div>
</aside>

<h2 id="overview">Overview</h2>
<p>Think about performing <a href="../666">Multiple Regression Analysis</a> $Y \gets X_{1} , \cdots, X_{p}$. <strong>Principal Component Analysis</strong>, abbreviated as <strong>PCA</strong> in English, is, in simple terms, a method of &lsquo;restructuring&rsquo; quantitative variables so that they are <a href="../808">properly independent</a> for analysis. From the perspective of multivariate data analysis, it has the significance of &lsquo;dimension reduction&rsquo; as a means to explain phenomena with fewer variables.</p>
<p>To properly understand the theoretical derivation of principal component analysis, knowledge of <a href="../../categories/%EC%84%A0%ED%98%95%EB%8C%80%EC%88%98">Linear Algebra</a>, and if possible, <a href="../../categories/%ED%96%89%EB%A0%AC%EB%8C%80%EC%88%98">Numerical Linear Algebra</a> is required. If it&rsquo;s completely confusing, try reading and understanding Steps 3 and 4 as well. If you&rsquo;re somewhat confident in <a href="../../categories/%EC%88%98%EB%A6%AC%ED%86%B5%EA%B3%84%ED%95%99">Mathematical Statistics</a>, it would also be good to read the post on <a href="../2606">Principal Component Analysis in Mathematical Statistics</a>.</p>
<h2 id="derivation-1">Derivation <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></h2>
<p><strong>Step 1. Data with $p$ independent variables and $n$ samples standardized</strong></p>
<p>$$
\begin{bmatrix}
y_{1}
\\  y_{2}
\\ \vdots
\\  y_{n}
\end{bmatrix} = \begin{bmatrix}
1 &amp; x_{11} &amp; \cdots &amp; x_{1p}
\\  1 &amp; x_{21} &amp; \cdots &amp; x_{2p}
\\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots
\\  1 &amp; x_{n1} &amp; \cdots &amp; x_{np}
\end{bmatrix} \begin{bmatrix}
\beta_{0}
\\ \beta_{1}
\\ \vdots
\\ \beta_{p}
\end{bmatrix}
$$</p>
<p>can be expressed as $Y = X \beta + \varepsilon$ using the <a href="../550">design matrix</a>. Here, a matrix $X$ standardized to matrix $Z$ means for the $j$th independent variable $X_{j}$, its sample mean $\overline{ x_{j} }$ and sample standard deviation $s_{ X_{j} }$, the $(i,j)$-component is</p>
<p>$$
\left( Z \right)_{ij}: = {{ x_{ij} } - \overline{ x_{j} } \over { s_{ X_{j} } }}
$$</p>
<p>. Then, for the new <a href="../2458">regression coefficient</a></p>
<p>$$
\Theta := \begin{bmatrix}
\theta_{1}
\\ \theta_{2}
\\ \vdots
\\ \theta_{p}
\end{bmatrix}
$$</p>
<p>, we can obtain the design matrix equation for regression analysis without an intercept as $Y = Z \Theta + \varepsilon$. This $Z = \begin{bmatrix}
Z_{1} &amp; \cdots &amp; Z_{p}
\end{bmatrix}$ becomes a matrix $( n \times p )$ consisting of vector $X_{1} , \cdots , X_{p}$ standardized to $Z_{1} , \cdots , Z_{p}$.</p>
<hr>
<p><strong>Step 2.</strong></p>
<p>Considering the spectral decomposition, $Z^{T} Z$ is a <a href="../313">symmetric matrix</a>, and thinking about its definition, $\displaystyle {{1} \over {n-1}} Z^{T} Z$ becomes the <a href="../425">covariance</a> matrix for $Z_{1} , \cdots , Z_{p}$. Especially, since $Z$ is a standardized matrix, it also serves as a <a href="../57">correlation coefficient</a> matrix. According to <a href="../346">Spectral Theory</a></p>
<p>$$
\begin{cases} Z^{T} Z = Q \Lambda Q^{T}
\\  Q^{T} Q = Q Q^{T} = I \end{cases}
$$</p>
<p>, there exist an <a href="../3009">orthogonal matrix</a></p>
<p>$$
Q = \begin{bmatrix}
q_{11} &amp; q_{12} &amp; \cdots &amp; q_{1p}
\\  q_{21} &amp; q_{22} &amp; \cdots &amp; q_{2p}
\\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots
\\  q_{p1} &amp; q_{p2} &amp; \cdots &amp; q_{pp}
\end{bmatrix}
$$</p>
<p>that satisfies it, and a <a href="../1958">diagonal matrix</a></p>
<p>$$
\Lambda = \text{diag} ( \lambda_{1} , \lambda_{2} , \cdots , \lambda_{p} ) = \begin{bmatrix}
\lambda_{1} &amp; 0 &amp; \cdots &amp; 0
\\  0 &amp; \lambda_{2} &amp; \cdots &amp; 0
\\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots
\\  0 &amp; 0 &amp; \cdots &amp; \lambda_{p}
\end{bmatrix}
$$</p>
<p>composed of the eigenvalues of $Z^{T} Z$. Now, for convenience, let&rsquo;s assume $\lambda_{1} \ge \lambda_{2} \ge \cdots \ge \lambda_{p}$ and think of $Z$ as a matrix reorganized accordingly.</p>
<hr>
<p><strong>Step 3.</strong> Composition of Principal Components</p>
<p>Since $I = QQ^{T}$,
$$
Y = Z \Theta + \varepsilon = Z Q Q^{T} \Theta + \varepsilon
$$
where we set $C := ZQ $ and $\alpha := Q^{T} \Theta$,
$$
Y = C \alpha + \varepsilon
$$
the <strong>Principal Components</strong> for $C = \begin{bmatrix}
C_{1} &amp; \cdots &amp; C_{p}
\end{bmatrix}$ are $C_{1} , \cdots , C_{p}$. The form of the $j$th principal component is</p>
<p>$$
C_{j} = q_{1j} Z_{1} + \cdots + q_{pj} Z_{p} = \sum_{i=1}^{p} q_{ij} Z_{j}
$$</p>
<p>, restructuring the original independent variables into a linear combination.</p>
<hr>
<p><strong>Step 4.</strong></p>
<p>The independence of the principal components can also be confirmed by the following calculation:
$$
\begin{align*}
&amp; Z^{T} Z = Q \Lambda Q^{T}
\\ \implies&amp; Q^{T} Z^{T} Z Q = \Lambda
\\ \implies&amp; \left( Z Q \right) ^{T} \left( Z Q \right) = \Lambda
\\ \implies&amp; C^{T} C = \Lambda
\end{align*}
$$
In other words,
$$
C_{j}^{T} C_{j} = \begin{cases} \lambda_{j} &amp; , i=j
\\  0 &amp; , i \ne j \end{cases}
$$
This means the principal components are necessarily independent, and if the <a href="../319">eigenvalue</a> $\lambda_{j}$ is close to $0$, it implies that $\displaystyle C_{j} = \sum_{i=1}^{p} q_{ij} Z_{j}$ is close to a zero vector, indicating that $Z_{1} , \cdots , Z_{p}$ may have multicollinearity.</p>
<p style="text-align: right; margin: 0px; margin-top: -2em;">‚ñ†</p>
<h2 id="limitations">Limitations</h2>
<p><a href="../814">Principal Component Regression Analysis</a> $Y \gets C_{1} , \cdots , C_{p}$ circumvents the issue of multicollinearity by removing variables with problematic eigenvalues. Moreover, since it uses significantly fewer variables compared to the original regression analysis, it can be said that the dimension has been reduced.</p>
<p>At first glance, principal component analysis may seem like a panacea, but that is not always the case. Firstly, the fact that standardization is required to create $Z$ means that there are many difficulties in dealing with <a href="../686">qualitative variables</a> or <a href="../805">transformations</a>, and this &lsquo;restructuring&rsquo; process makes the analysis itself harder to understand.</p>
<p>Considering that statistics are necessary even for those who do not understand statistics, this point is quite fatal. For example, if principal component analysis is used for analyzing the Korean economy, instead of easily understandable figures like the unemployment rate $X_{2}$ or average starting salary $X_{7}$, it might be expressed in strange terms like &lsquo;comprehensive employment index&rsquo; $C_{4}$. Even the analyst, who might have produced a usable regression formula, may not grasp its true meaning, which could lead to a disaster. (In computer science, prediction and classification are more important than understanding data, so this downside is not taken as seriously.)</p>
<p>Also, if none of the principal components are excluded and $Y \gets C_{1} , \cdots , C_{p}$ is used as is, there&rsquo;s no difference from the original $Y \gets X_{1} , \cdots , X_{p}$, which means giving up the original data itself. It might still be necessary to use it, but if not, there&rsquo;s no reason to. Even when using it, it&rsquo;s crucial to be fully aware of its disadvantages and limitations.</p>
<h2 id="condition-number-1">Condition Number <sup id="fnref1:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></h2>
<p>Meanwhile, the <strong>Condition Number</strong>, a numerical indicator for diagnosing multicollinearity through the eigenvalues obtained in the derivation process</p>
<p>$$
\kappa := \sqrt{ {{ \lambda_{1} } \over { \lambda_{p} }} }
$$</p>
<p>, can be calculated. Empirically, if $\kappa &gt; 15$, it&rsquo;s presumed there is multicollinearity in the original data, although it&rsquo;s not widely used.</p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="../808">Multicollinearity</a></li>
<li><a href="../814">How to do Principal Component Regression Analysis in R</a></li>
<li><a href="../2606">Principal Component Analysis in Mathematical Statistics</a></li>
</ul>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Hadi. (2006). Regression Analysis by Example(4th Edition): p255~257.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a>&#160;<a href="#fnref1:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>


<aside style="text-align: right;">
    2019-01-20&emsp;
    Î•òÎåÄÏãù&emsp;
    
    <a href="../1091">üé≤ 812</a>
</aside>



<script>
  document.addEventListener('DOMContentLoaded', () => {
    
    const contentBox = document.querySelector('.content-box');
    if (contentBox) {
      renderKaTex(contentBox);
    }
    const tex = document.querySelector('.tex');
    if (tex) {
      renderKaTex(tex);
    }

    var title = 'Principal Component Analysis in Statistics';
    var link = 'https:\/\/freshrimpsushi.github.io\/en\/posts\/812\/';
    var arr = new Array();
    var obj = {
      "title": title,
      "link": link
    };
    var postList = JSON.parse(localStorage.getItem('latelyViewPostList'));
    if (postList == '' || postList == null || postList == undefined || postList == 0 || postList == NaN) {
      arr.push(obj);
      localStorage.setItem('latelyViewPostList', JSON.stringify(arr));
    } else {
      var listSize = postList.length;
      for (var i = 0; i < listSize; i++) {
        if (title == postList[i].title) {
          postList.splice(i, 1);
          break;
        }
      }
      arr = postList;
      arr.push(obj);
      if (arr.length > 5) {
        arr.shift();
      }
      localStorage.setItem('latelyViewPostList', JSON.stringify(arr));
    }
  });
</script>

      </div>
      <aside>
<h2>Comment</h2>
<div class="area-reply">
  <div class="list-reply">
  </div>
</div>


<div class="write-box">
  <div class="write-author-info box-account">
    <input type="hidden" name="cmt_idx" />
    <input class="ai-author" type="text" value="" placeholder="Name" />
    <input class="ai-password" type="password" value="" maxlength="20" placeholder="Password" />
  </div>
  <div class="write-content">
    <textarea class="ai-content" value="" placeholder='Feel free to ask in english' style="IME-MODE:active;"></textarea>
 
  </div>
  
  <a href="javascript:void(0);" onclick="write_comment();">
    <div class="write-button">
      <i class='fa-solid fa-paper-plane'></i>
    </div>
  </a>
  <aside class="tex"> 
    $\TeX$ is also applied to comments.
    </aside>
</div>
</aside>

<script>
  let commentRows = [];
  const listReply = document.querySelector('.list-reply');

  document.addEventListener('DOMContentLoaded', () => {
    get_all_comment();
  });

  function get_all_comment() {
    fetch('https://api64.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {return data.ip})
      .then(ip => {
        const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=getAllComment';
        return postFetch(url, {
                board_idx: '812',
                user_ip: ip
              });
      })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          commentRows = data.rows;
          render_comment(commentRows);
        }
      })
      .catch(err => console.error(err));
  }

  function render_comment(rows) {
    const badgeExceptionArr = ['Î•òÎåÄÏãù', 'Ï†ÑÍ∏∞ÌòÑ', '„Öá„Öá', 'ÏßàÎ¨∏'];
    const adminExceptionArr = ['Î•òÎåÄÏãù', 'Ï†ÑÍ∏∞ÌòÑ'];
    render_blank();
    let html = '';
    rows.map(row => {
      html += `<div id="comment${row.cmt_idx}" class="parents">`;
      html += `<div class="content-info">`;
      
      let badge = '';
      if (row.cmt_cnt > 125) {
        badge = 'ü•á';
      } else if (row.cmt_cnt > 25) {
        badge = 'ü•à';
      } else if (row.cmt_cnt > 5) {
        badge = 'ü•â';
      } else { }

      if (badgeExceptionArr.includes(row.author)) {
        badge = '';
      }

      let ipAddress = '';
      if (row.ip_address == null) {
        ipAddress = '(-)';
      } else {
        ipAddress = `(${row.ip_address})`;
      }

      if(adminExceptionArr.includes(row.author)) {
        ipAddress = '';
      }
      
      html += `<div class="list-author">${badge} ${row.author} ${ipAddress}</div>`;
      
      html += `<sup class="list-date">${row.datetime.slice(2, -3)}</sup>`;
      html += `<div class="list-button">`;
      html += `<div class="list-update-button" onclick="update_comment('${row.cmt_idx}', 'parents');"><i class="fa-solid fa-pen-to-square"></i></div>`; 
      html += `<div class="list-delete-button" onclick="delete_comment('${row.cmt_idx}', 'parents');"><i class="fa-solid fa-trash"></i></div>`; 
      html += `</div>`; 
      html += `</div>`; 
      if(!row.approve) {html += `<div style="text-align: right;"><i class="fa-solid fa-hourglass-start"></i> Waiting for approvement</div>`;}
      let content = row.content;
      content = content.replace(/\n/g, '<br />');
      html += `<div class="content-text">${content} <span class="re-comment-button" onclick="re_comment('${row.cmt_idx}');"><i class="fa-solid fa-reply"></i></span></div>`;
      html += `<div class="re-comment"></div>`; 
      html += `</div>`;

      row.child.map(child => {
        html += `<div id="comment${child.cmt_idx}" class="child">`;
        html += `<div class="content-info">`;
        
        let badge = '';
        if (child.cmt_cnt > 5) {
          badge = 'ü•â';
        } else if (child.cmt_cnt > 25) {
          badge = 'ü•à';
        } else if (child.cmt_cnt > 125) {
          badge = 'ü•á';
        } else { }

        if (badgeExceptionArr.includes(child.author)) {
          badge = '';
        }

        let ipAddress = '';
        if (child.ip_address == null) {
          ipAddress = '(-)';
        } else {
          ipAddress = `(${child.ip_address})`;
        }

        if(adminExceptionArr.includes(child.author)) {
          ipAddress = '';
        }

        html += `<div class="list-author">${badge} ${child.author} ${ipAddress}</div>`;
        
        html += `<sup class="list-date">${row.datetime.slice(2, -3)}</sup>`;
        html += `<div class="list-button">`;
        html += `<div class="list-update-button" onclick="update_comment('${child.cmt_idx}', 'child');"><i class="fa-solid fa-pen-to-square"></i></div>`; 
        html += `<div class="list-delete-button" onclick="delete_comment('${child.cmt_idx}', 'child');"><i class="fa-solid fa-trash"></i></div>`; 
        html += `</div>`; 
        html += `</div>`; 
        if(!child.approve) {html += `<div style="text-align: right;"><i class="fa-solid fa-hourglass-start"></i> Waiting for approvement</div>`;}
        let content = child.content;
        content = content.replace(/\n/g, '<br />');
        html += `<div class="content-text">${content}</div>`;
        html += `</div>`;
      });
    });
    listReply.innerHTML = html;
    renderKaTex(listReply);
    if(location.href.indexOf('#') != -1) {
      location.href=location.href.substr(location.href.indexOf('#'));
  }
  }

  function render_blank() {
    listReply.innerHTML = '';
  }

  
  function write_comment() {
    const inputAuthor = document.querySelector('.ai-author');
    const inputPassword = document.querySelector('.ai-password');
    const inputContent = document.querySelector('.ai-content');

    const author = inputAuthor.value;
    const password = inputPassword.value;
    const content = inputContent.value;

    if (author === '' || password === '' || content === '') {
      alert('ÎπàÏπ∏ÏùÑ Ï±ÑÏõåÏ£ºÏÑ∏Ïöî');
      return;
    }
    const idx = '812';
    const board_slug = 'pca-principal-components-analysis-in-Statistics';
    const board_title = 'Principal Component Analysis in Statistics';

    fetch('https://api64.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {return data.ip})
      .then(ip => {
        const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=writeComment';
        return postFetch(url, {
                board_idx: idx,
                board_slug: board_slug,
                board_title: board_title,
                author: author.replace(/\+/g, "%2B"),
                password: password,
                content: content.replace(/\+/g, "%2B"),
                user_ip: ip
              });
      })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          commentRows.push(data.row);
          render_comment(commentRows);
          inputAuthor.value = '';
          inputPassword.value = '';
          inputContent.value = '';
        } else {
          if (data.status === 606) {
            Swal.fire('Warning!\nÏßÄÏÜçÏ†ÅÏù∏ ÎèÑÎ∞∞ ÏãúÎèÑÏãú\nIPÍ∞Ä Ï∞®Îã®Îê† Ïàò ÏûàÏäµÎãàÎã§.');
            inputAuthor.value = '';
            inputPassword.value = '';
            inputContent.value = '';
          } else if (data.status === 607) {
            alert('ÏßÄÎÇòÏπú ÎåìÍ∏Ä ÎèÑÎ∞∞Î•º ÌôïÏù∏ÌïòÏó¨\nÏ†ëÍ∑ºÏùÑ Ï∞®Îã®Ìï©ÎãàÎã§.');
            window.location.href = 'https://google.com';
          } else {}
        }
      })
      .catch(err => console.error(err));
  }

  
  async function update_comment(cmt_idx, type) {
    const { value: password } = await Swal.fire({
      title: 'ÎåìÍ∏Ä ÏàòÏ†ï',
      input: 'password',
      inputPlaceholder: 'Í∏Ä ÏûëÏÑ± Ïãú ÏûÖÎ†•ÌñàÎçò Ìå®Ïä§ÏõåÎìúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî',
      inputAttributes: {
        maxlength: 20,
        autocapitalize: 'off',
        autocorrect: 'off'
      }
    });

    if (password) {
      const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=checkPassword';
      postFetch(url, {
        cmt_idx: cmt_idx,
        password: password
      })
        .then(res => res.json())
        .then(data => {
          if (data.ok) {
            const commnetHtml = document.querySelector(`#comment${cmt_idx}`);
            const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=getComment';
            postFetch(url, {
              cmt_idx: cmt_idx
            })
              .then(res => res.json())
              .then(data => {
                if (data.ok) {
                  const row = data.row;
                  const author = row.author;
                  const content = row.content;
                  let html = '';
                  html += `<div class="update-author-info">`;
                  html += `<input class="update-author" type="text" value="${author}" placeholder="Ïù¥Î¶Ñ" />`;
                  html += `<input class="update-password" type="password" value="${password}" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏" disabled />`;
                  html += '</div>';
                  html += `<textarea class="update-content" value="" style="IME-MODE:active;">${content}</textarea>`;
                  html += `<input class="update_comment-button" type="submit" value="ÏàòÏ†ï" onclick="update_comment_click(${cmt_idx}, '${type}')" />`;
                  html += `<input class="update_comment-button" type="submit" value="Ï∑®ÏÜå" onclick="cancel_click(${cmt_idx})" />`;
                  commnetHtml.innerHTML = html;
                }
              })
              .catch(err => console.error(err));
          } else {
            Swal.fire('Ìå®Ïä§ÏõåÎìú ÏùºÏπò Ïò§Î•ò');
          }
        })
        .catch(err => console.error(err));
    }
  }

  
  async function delete_comment(cmt_idx, type) {
    const { value: password } = await Swal.fire({
      title: 'ÎåìÍ∏Ä ÏÇ≠Ï†ú',
      text: "ÏÇ≠Ï†úÌïòÎ©¥ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.",
      input: 'password',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      inputPlaceholder: 'Í∏Ä ÏûëÏÑ± Ïãú ÏûÖÎ†•ÌñàÎçò Ìå®Ïä§ÏõåÎìúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî',
      inputAttributes: {
        maxlength: 20,
        autocapitalize: 'off',
        autocorrect: 'off'
      }
    });

    if (password) {
      const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=checkPassword';
      postFetch(url, {
        cmt_idx: cmt_idx,
        password: password
      })
        .then(res => res.json())
        .then(data => {
          if (data.ok) {
            const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=deleteComment';
            postFetch(url, {
              cmt_idx: cmt_idx
            })
              .then(res => res.json())
              .then(data => {
                Swal.fire('ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');
                if (type === 'parents') {
                  commentRows = commentRows.filter((row) => row.cmt_idx !== cmt_idx);
                } else if (type === 'child') {
                  commentRows.map((row) => {
                    row.child = row.child.filter((childRow) => childRow.cmt_idx !== cmt_idx);
                    row.child_cnt = row.child.length;
                  });
                } else { }
                render_comment(commentRows);
              })
              .catch(err => console.error(err));
          } else {
            Swal.fire('Ìå®Ïä§ÏõåÎìú ÏùºÏπò Ïò§Î•ò');
          }
        })
        .catch(err => console.error(err));
    }
  }

  
  function update_comment_click(cmt_idx, type) {
    const inputAuthor = document.querySelector(`#comment${cmt_idx} .update-author`);
    const inputPassword = document.querySelector(`#comment${cmt_idx} .update-password`);
    const inputContent = document.querySelector(`#comment${cmt_idx} .update-content`);

    const author = inputAuthor.value;
    const password = inputPassword.value;
    const content = inputContent.value;

    if (author === '' || password === '' || content === '') {
      alert('ÎπàÏπ∏ÏùÑ Ï±ÑÏõåÏ£ºÏÑ∏Ïöî');
    }

    const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=updateComment';
    postFetch(url, {
      cmt_idx: cmt_idx,
      author: author.replace(/\+/g, "%2B"),
      password: password,
      content: content.replace(/\+/g, "%2B")
    })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          Swal.fire('ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§.');
          if (type === 'parents') {
            commentRows.map((row) => {
              if (row.cmt_idx == cmt_idx) {
                row.author = data.author;
                row.content = data.content;
              }
            });
          } else if (type === 'child') {
            commentRows.map((row) => {
              if (row.cmt_idx == data.parent_cmt_idx) {
                row.child.map((child) => {
                  if (child.cmt_idx == cmt_idx) {
                    child.author = data.author;
                    child.content = data.content;
                  }
                });
              }
            });
          } else { }
          render_comment(commentRows);
          recentRows.map((row) => {
            if (row.cmt_idx == cmt_idx) {
              row.author = data.author;
              row.content = data.content;
            }
          });
          render_recent_comment(recentRows);
        }
      })
      .catch(err => console.error(err));
  }

  
  function cancel_click() {
    render_comment(commentRows);
  }

  
  function re_comment(cmt_idx) {
    const reComment = document.querySelector(`#comment${cmt_idx} .re-comment`);
    let html = '';
    html += '<div class="re-comment-box">';
    html += '<div class="re-comment-author-info">';
    html += '<input class="re-comment-author" type="text" value="" placeholder="Ïù¥Î¶Ñ" />';
    html += '<input class="re-comment-password" type="password" value="" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏" />';
    html += '</div>';
    html += '<textarea class="re-comment-content" placeholder="ÎÇ¥Ïö©" value="" style="IME-MODE:active;"></textarea>';
    
    
    html += `<a href="javascript:void(0);" onclick="cancel_click(${cmt_idx});"><div class="write-button"><i class="fa-solid fa-ban"></i></i></div></a>`; 
    html += `<a href="javascript:void(0);" onclick="re_comment_click(${cmt_idx});"><div class="write-button"><i class='fa-solid fa-paper-plane'></i></div></a>`; 
    html += '</div>';
   
    reComment.innerHTML = html;
  }

  function re_comment_click(cmt_idx) {
    const inputAuthor = document.querySelector(`#comment${cmt_idx} .re-comment-author`);
    const inputPassword = document.querySelector(`#comment${cmt_idx} .re-comment-password`);
    const inputContent = document.querySelector(`#comment${cmt_idx} .re-comment-content`);

    const author = inputAuthor.value;
    const password = inputPassword.value;
    const content = inputContent.value;

    if (author === '' || password === '' || content === '') {
      alert('ÎπàÏπ∏ÏùÑ Ï±ÑÏõåÏ£ºÏÑ∏Ïöî');
      return;
    }

    const board_idx = '812';
    const board_slug = 'pca-principal-components-analysis-in-Statistics';
    const board_title = 'Principal Component Analysis in Statistics';

    fetch('https://api64.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {return data.ip})
      .then(ip => {
        const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=writeReComment';
        return postFetch(url, {
                board_idx: board_idx,
                board_slug: board_slug,
                board_title: board_title,
                cmt_idx: cmt_idx,
                author: author.replace(/\+/g, "%2B"),
                password: password,
                content: content.replace(/\+/g, "%2B"),
                user_ip: ip
              });
      })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          commentRows.map((row) => {
            if (row.cmt_idx == cmt_idx) {
              row.child.push(data.row);
            }
          });
          render_comment(commentRows);
        } else {
          if (data.status == 606) {
            Swal.fire('Warning!\nÏßÄÏÜçÏ†ÅÏù∏ ÎèÑÎ∞∞ ÏãúÎèÑÏãú\nIPÍ∞Ä Ï∞®Îã®Îê† Ïàò ÏûàÏäµÎãàÎã§.');
            inputAuthor.value = '';
            inputPassword.value = '';
            inputContent.value = '';
          } else if (data.status === 607) {
            alert('ÏßÄÎÇòÏπú ÎåìÍ∏Ä ÎèÑÎ∞∞Î•º ÌôïÏù∏ÌïòÏó¨\nÏ†ëÍ∑ºÏùÑ Ï∞®Îã®Ìï©ÎãàÎã§.');
            window.location.href = 'https://google.com';
          } else {}
        }
      })
      .catch(err => console.error(err));
  }

</script>
    </div>
    <aside>
<div class="sidebar">

<div class="category">
</div>

<div style="display:flex;">

Click ‚óè to highlight only you interested.

      <div class="resetmute">
        <button class="sb-btn btnReset"
          style = "border-radius:5px; border:0px">reset</button>
        <button class="sb-btn btnMute"
          style = "border-radius:5px; border:0px">mute</button>
      </div>
</div>


 

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  



<script>
  const color = {green: '#33cc33', yellow: '#ffcc00', red: '#ff3333', black: '#000000'};
  const categoryRows = [
    [
      { idx: 1, name: 'Ìï®Ïàò', color: color.red, show: 'Ìï®Ïàò', size: '112'},
      { idx: 2, name: 'Î≥¥Ï°∞Ï†ïÎ¶¨', color: color.red, show: 'Î≥¥Ï°∞Ï†ïÎ¶¨', size: '29'},
      { idx: 3, name: 'ÏßëÌï©Î°†', color: color.green, show: 'SetTheory', size: '47'},
      { idx: 4, name: 'Ï†ïÏàòÎ°†', color: color.green, show: 'NumberTheory', size: '89'},
      { idx: 5, name: 'Í∏∞ÌïòÌïô', color: color.red, show: 'Í∏∞ÌïòÌïô', size: '147'},
      { idx: 6, name: 'ÌñâÎ†¨ÎåÄÏàò', color: color.red, show: 'ÌñâÎ†¨ÎåÄÏàò', size: '91'},
      { idx: 7, name: 'ÏÑ†ÌòïÎåÄÏàò', color: color.red, show: 'ÏÑ†ÌòïÎåÄÏàò', size: '92'},
      { idx: 8, name: 'Ï∂îÏÉÅÎåÄÏàò', color: color.green, show: 'AbstractAlgebra', size: '92'},
      { idx: 9, name: 'ÏúÑÏÉÅÏàòÌïô', color: color.green, show: 'Topology', size: '64'},
      { idx: 10, name: 'Í∑∏ÎûòÌîÑÏù¥Î°†', color: color.green, show: 'GraphTheory', size: '58'}
    ],
    [
      { idx: 1, name: 'Ìï¥ÏÑùÍ∞úÎ°†', color: color.red, show: 'Ìï¥ÏÑùÍ∞úÎ°†', size: '97'},
      { idx: 2, name: 'Îã§Î≥ÄÏàòÎ≤°ÌÑ∞Ìï¥ÏÑù', color: color.red, show: 'Îã§Î≥ÄÏàòÎ≤°ÌÑ∞Ìï¥ÏÑù', size: '22'},
      { idx: 3, name: 'Î≥µÏÜåÌï¥ÏÑù', color: color.green, show: 'ComplexAnaylsis', size: '71'},
      { idx: 4, name: 'Ï∏°ÎèÑÎ°†', color: color.green, show: 'MeasureTheory', size: '53'},
      { idx: 5, name: 'Ìë∏Î¶¨ÏóêÌï¥ÏÑù', color: color.red, show: 'Ìë∏Î¶¨ÏóêÌï¥ÏÑù', size: '52'},
      { idx: 6, name: 'Ï¥àÌï®ÏàòÎ°†', color: color.red, show: 'Ï¥àÌï®ÏàòÎ°†', size: '23'},
      { idx: 7, name: 'Îã®Ï∏µÏ¥¨ÏòÅ', color: color.red, show: 'Îã®Ï∏µÏ¥¨ÏòÅ', size: '19'},
    ],
    [
      { idx: 1, name: 'Í±∞Î¶¨Í≥µÍ∞Ñ', color: color.green, show: 'MetricSpace', size: '38'},
      { idx: 2, name: 'Î∞îÎÇòÌùêÍ≥µÍ∞Ñ', color: color.green, show: 'BanachSpace', size: '37'},
      { idx: 3, name: 'ÌûêÎ≤†Î•¥Ìä∏Í≥µÍ∞Ñ', color: color.red, show: 'ÌûêÎ≤†Î•¥Ìä∏Í≥µÍ∞Ñ', size: '31'},
      { idx: 4, name: 'Î•¥Î≤°Í≥µÍ∞Ñ', color: color.red, show: 'Î•¥Î≤°Í≥µÍ∞Ñ', size: '33'}
    ],
    [
      { idx: 1, name: 'ÏÉÅÎØ∏Î∂ÑÎ∞©Ï†ïÏãù', color: color.red, show: 'ÏÉÅÎØ∏Î∂ÑÎ∞©Ï†ïÏãù', size: '58'},
      { idx: 2, name: 'Ìé∏ÎØ∏Î∂ÑÎ∞©Ï†ïÏãù', color: color.red, show: 'Ìé∏ÎØ∏Î∂ÑÎ∞©Ï†ïÏãù', size: '58'},
      { idx: 3, name: 'ÌôïÎ•†ÎØ∏Î∂ÑÎ∞©Ï†ïÏãù', color: color.green, show: 'SDE', size: '25'}
    ],
    [
      { idx: 1, name: 'Îß§Ìä∏Îû©', color: color.green, show: 'MATLAB', size: '16'},
      { idx: 2, name: 'ÏàòÏπòÌï¥ÏÑù', color: color.green, show: 'NumericalAnalysis', size: '55'},
      { idx: 3, name: 'ÏµúÏ†ÅÌôîÏù¥Î°†', color: color.green, show: 'Optimization', size: '37'}
    ],
    [
      { idx: 1, name: 'Î¨ºÎ¶¨Ìïô', color: color.red, show: 'Î¨ºÎ¶¨Ìïô', size: '17'},
      { idx: 2, name: 'ÏàòÎ¶¨Î¨ºÎ¶¨', color: color.red, show: 'ÏàòÎ¶¨Î¨ºÎ¶¨', size: '70'},
      { idx: 3, name: 'Í≥†Ï†ÑÏó≠Ìïô', color: color.red, show: 'Í≥†Ï†ÑÏó≠Ìïô', size: '44'},
      { idx: 4, name: 'Ï†ÑÏûêÍ∏∞Ìïô', color: color.red, show: 'Ï†ÑÏûêÍ∏∞Ìïô', size: '51'},
      { idx: 5, name: 'ÏñëÏûêÏó≠Ìïô', color: color.red, show: 'ÏñëÏûêÏó≠Ìïô', size: '37'},
      { idx: 6, name: 'Ïó¥Î¨ºÎ¶¨Ìïô', color: color.red, show: 'Ïó¥Î¨ºÎ¶¨Ìïô', size: '29'}
    ],
    [
      { idx: 1, name: 'R', color: color.green, show: 'R', size: '53'},
      { idx: 2, name: 'Îç∞Ïù¥ÌÑ∞ÌôïÎ≥¥', color: color.green, show: 'DataSets', size: '22'},
      { idx: 3, name: 'Îç∞Ïù¥ÌÑ∞Í≥ºÌïô', color: color.green, show: 'DataScience', size: '24'},
      { idx: 4, name: 'ÌÜµÍ≥ÑÏ†ÅÍ≤ÄÏ†ï', color: color.green, show: 'StatisticalTest', size: '22'},
      { idx: 5, name: 'ÌÜµÍ≥ÑÏ†ÅÎ∂ÑÏÑù', color: color.green, show: 'StatisticalAnalysis', size: '71'},
      { idx: 6, name: 'ÏàòÎ¶¨ÌÜµÍ≥ÑÌïô', color: color.green, show: 'MathematicalStatistics', size: '110'},
      { idx: 7, name: 'ÌôïÎ•†Î∂ÑÌè¨Î°†', color: color.green, show: 'ProbabilityDistribution', size: '72'},
      { idx: 8, name: 'ÌôïÎ•†Î°†', color: color.green, show: 'ProbabilityTheory', size: '74'},
      { idx: 9, name: 'ÏúÑÏÉÅÎç∞Ïù¥ÌÑ∞Î∂ÑÏÑù', color: color.green, show: 'TDA', size: '40'}
    ],
    [
      { idx: 1, name: 'Ï§ÑÎ¶¨ÏïÑ', color: color.green, show: 'Julia', size: '192'},
      { idx: 2, name: 'ÌîÑÎ°úÍ∑∏ÎûòÎ∞ç', color: color.red, show: 'Programming', size: '55'},
      { idx: 3, name: 'ÏïåÍ≥†Î¶¨Ï¶ò', color: color.green, show: 'Algorithm', size: '28'},
      { idx: 4, name: 'Î®∏Ïã†Îü¨Îãù', color: color.green, show: 'MachineLearning', size: '79'},
      { idx: 5, name: 'ÏÑ∏Ïù¥Î≤ÑÎ©îÌä∏Î¶≠Ïä§', color: color.green, show: 'Sabermetrics', size: '192', size: '12'},
      { idx: 6, name: 'ÎÖºÎ¨∏ÏûëÏÑ±', color: color.green, show: 'Writing', size: '21'},
      { idx: 7, name: 'ÍµêÍ≥ºÍ≥ºÏ†ï', color: color.green, show: 'HighschoolMath', size: '54'},
      { idx: 8, name: 'ÏÉùÏÉàÏö∞Ï¥àÎ∞•ÏßÄ', color: color.black , show: 'JOF', size: '3'}
    ]
  ];

  document.addEventListener('DOMContentLoaded', () => {
    const blindList = JSON.parse(localStorage.getItem('blindList'));
    if (blindList == '' || blindList == null || blindList == undefined || blindList == 0 || blindList == NaN) {
      localStorage.setItem('blindList', null);
    }
    render_category(categoryRows);

    blind_category(blindList);

    const btnReset = document.querySelector('.btnReset');
    btnReset.addEventListener('click', () => {
      let arr = new Array();
      localStorage.setItem('blindList', JSON.stringify(arr));
      blind_category(arr);
    });

    const btnMute = document.querySelector('.btnMute');
    btnMute.addEventListener('click', () => {
      let arr = new Array();
      for(let i = 0; i < categoryRows.length; i++) {
        categoryRows[i].map(row => {
          const data = {mainIdx: i, subIdx: row.idx};
          arr.push(data);
        });
      }
      localStorage.setItem('blindList', JSON.stringify(arr));
      blind_category(arr);
    });
  });

  function render_category(rows)
  {
    const category = document.querySelector('.category');
    let html = '';
    for(let i = 0; i < rows.length; i++) {
      rows[i].map(row => {
        html += `<span id="cate${i}-${row.idx}" class="cate etewsert">`;
        html += `<span onclick="check_blind(${i}, ${row.idx});" style="cursor: pointer; color: ${row.color}">‚óè</span>`;
        html += `<a href="https:\/\/freshrimpsushi.github.io\/en\/categories/${row.name.toLowerCase()}/">`; 
        html += ` ${row.show} (${row.size})</a>`;
        html += '</span>';
        if(screen.width > 954) {html += '<br>'} else {html += ' '}
      });
      html += '<hr>';
    }

    category.innerHTML = html;
  }

   
  function check_blind(mainIdx, subIdx)
  {
    const cateDiv = document.querySelector(`#cate${mainIdx}-${subIdx}`);
    let arr = new Array();
    const data = {mainIdx, subIdx};
    let blindList = JSON.parse(localStorage.getItem('blindList'));
    if (blindList == '' || blindList == null || blindList == undefined || blindList == 0 || blindList == NaN) {
      arr.push(data);
      localStorage.setItem('blindList', JSON.stringify(arr));
      cateDiv.className += ' blind';
    } else {
      arr = blindList;
      let tempArr = null;
      for(let i = 0; i < arr.length; i++) {
        if(arr[i].mainIdx == mainIdx && arr[i].subIdx == subIdx) {
          tempArr = arr.filter(a => a.mainIdx != mainIdx || a.subIdx != subIdx);
          break;
        }
      }
      
      if(tempArr === null) {
        arr.push(data);
        localStorage.setItem('blindList', JSON.stringify(arr));
        cateDiv.className += ' blind';
      } else {
        localStorage.setItem('blindList', JSON.stringify(tempArr));
        cateDiv.className = 'cate';
      }
    }
  }

   
  function blind_category(blindList)
  {
    const cateDiv = document.querySelectorAll('.cate');
    cateDiv.forEach(div => {
      div.className = 'cate';
    });
    if(blindList !== null) {
      blindList.map(list => {
        const blindDiv = document.querySelector(`#cate${list.mainIdx}-${list.subIdx}`);
        blindDiv.className += ' blind';
      });
    }
  }
</script>
<br>
<b>Viewed posts</b>

<div class="lately-viewed-list" style="padding-left: 4px;">
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const postList = JSON.parse(localStorage.getItem('latelyViewPostList'));

    const list = document.querySelector('.lately-viewed-list');
    let html = '';
    if (postList == '' || postList == null || postList == undefined || postList == 0 || postList == NaN) {
      localStorage.setItem('latelyViewPostList', null);
      html += '<div class="lv-list">';
      html += ' ¬∑ Ïó¥ÎûåÌïú Ìè¨Ïä§Ìä∏Í∞Ä ÏóÜÏäµÎãàÎã§.';
      html += '</div>';
      list.innerHTML = html;
    } else {
      for (let i = (postList.length - 1); i >= 0; i--) {
        html += '<div class="lv-list">';
        html += `<a href="${postList[i].link}"> ¬∑ ${postList[i].title}</a>`;
        html += '</div>';
      }
      list.innerHTML = html;
    }
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    
    const contentBox = document.querySelector('.content-box');
    if (contentBox) {
      renderKaTex(contentBox);
    }
    const tex = document.querySelector('.tex');
    if (tex) {
      renderKaTex(tex);
    }

    var title = 'Principal Component Analysis in Statistics';
    var link = 'https:\/\/freshrimpsushi.github.io\/en\/posts\/812\/';
    var arr = new Array();
    var obj = {
      "title": title,
      "link": link
    };
    var postList = JSON.parse(localStorage.getItem('latelyViewPostList'));
    if (postList == '' || postList == null || postList == undefined || postList == 0 || postList == NaN) {
      arr.push(obj);
      localStorage.setItem('latelyViewPostList', JSON.stringify(arr));
    } else {
      var listSize = postList.length;
      for (var i = 0; i < listSize; i++) {
        if (title == postList[i].title) {
          postList.splice(i, 1);
          break;
        }
      }
      arr = postList;
      arr.push(obj);
      if (arr.length > 5) {
        arr.shift();
      }
      localStorage.setItem('latelyViewPostList', JSON.stringify(arr));
    }
  });
</script>

<br>
<b>Recent comment</b>

<div class="current-reply">
</div>

<script>
  const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/recent_comment.php?action=getCurrentComment';
  let recentRows = []; 
  fetch(url)
    .then(res => res.json())
    .then(data => {
      if (data.ok) {
        recentRows = data.rows;
        render_recent_comment(recentRows);
      }
    })
    .catch(err => console.error(err));

  
  function render_recent_comment(rows) {
    const currentReply = document.querySelector('.current-reply');
    let html = '';
    rows.map(row => {
      let link = 'https:\/\/freshrimpsushi.github.io\/en\/';
      if (row.board_idx > -1) {
        
        
        link += `posts/${row.board_idx}#comment${row.cmt_idx}`;
      } else if (row.board_idx == -1) {
        link += `#comment${row.cmt_idx}`;
      } else {
        link += `categories/${row.board_title}#comment${row.cmt_idx}`;
      }
      html += '<div class="current-reply-list">';
      html += `<a href="${link}">`;
      html += `<b> - ${row.author}</b>: `;
      html += `${row.content}`;
      html += `</a>`;
      html += `</div>`;
    });
    currentReply.innerHTML = html;
    renderKaTex(currentReply);
  }
</script>
</div>
</aside>
  </div>
  
  <footer>
  <aside>
    <div>
      <p style="text-align: center">¬© FreshrimpRestaurant / Powered by Î•òÎåÄÏãù, Ï†ÑÍ∏∞ÌòÑ
      <br><img src=https://freshrimpsushi.github.io/en/logo/gmail.png width=16px> Contact:
        freshrimpsushi@gmail.com
      </p>
    </div>

    
    
    
  </aside>
</footer>

  

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/katex.min.js"
  integrity="sha512-5ufNcHqOYgilGEHPfuRIQ5B/vDS1M8+UC+DESZ5CwVgGTg+b2Ol/15rYL/GiCWJ/Sx8oVo0FPFok1dPk8U9INQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/contrib/auto-render.min.js"
  integrity="sha512-ZA/RPrAo88DlwRnnoNVqKINnQNcWERzRK03PDaA4GIJiVZvGFIWQbdWCsUebMZfkWohnfngsDjXzU6PokO4jGw=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  
  function renderKaTex(target) {
    renderMathInElement(target, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
      ],
      trust: true,
      trust: (context) =>
        ["\\htmlId", "\\href", "\\includegraphics"].includes(context.command),
      macros: {
        "\\eqref": "(\\text{#1})",
        "\\ref": "\\href{###1}{\\text{#1}}",
        "\\label": "\\htmlId{#1}{}",
        "\\sech": "\\operatorname{sech}",
        "\\sgn": "\\operatorname{sgn}",
        "\\sign": "\\operatorname{sign}",
        "\\sinc": "\\operatorname{sinc}",
        "\\diag": "\\operatorname{diag}",
        "\\diam": "\\operatorname{diam}",
        "\\Tr": "\\operatorname{Tr}",
        "\\tr": "\\operatorname{tr}",
        "\\Re": "\\operatorname{Re}",
        "\\Im": "\\operatorname{Im}",
        "\\Var": "\\operatorname{Var}",
        "\\Poi": "\\operatorname{Poi}",
        "\\Cov": "\\operatorname{Cov}",
        "\\span": "\\operatorname{span}",
        "\\supp": "\\operatorname{supp}",
        "\\rank": "\\operatorname{rank}",
        "\\nullity": "\\operatorname{nullity}",
        "\\Ric": "\\operatorname{Ric}",
        "\\i": "\\mathrm{i}",
        "\\d": "\\mathrm{d}",
        "\\cR": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2202/2615581243_1645770096.5863.png}",
        "\\acR": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680634690.4371.png}",
        "\\bcR": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2202/2615581243_1645770096.5899.png}",
        "\\abcR": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680634690.0596.png}",
        "\\crH": "\\includegraphics[height=0.8em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680622958.7632.png}",
        "\\smallcrH": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680622958.7632.png}",
        "\\acrH": "\\includegraphics[height=0.8em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680634690.8386.png}",
        "\\smallacrH": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680634690.8386.png}",
      },
      throwOnError: false,
    });
  }
</script>
</body>

</html>