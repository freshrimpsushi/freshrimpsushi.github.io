<!DOCTYPE html>
<html lang="ko" class="blog">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    
    

    
    <meta name="NaverBot" content="All" />
    <meta name="NaverBot" content="index,follow" />
    <meta name="Yeti" content="All" />
    <meta name="Yeti" content="index,follow" />

    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/katex.min.css"
        integrity="sha512-vJqxkZ+Sugf/6WRlpcxN01qVfX/29hF6qc33eHF1va3NgoV+U+wCi+uTAsQ10sDoGyBxHLdaHvGwDlV3yVYboA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    <link href=https://freshrimpsushi.github.io/css/custum.css rel="preload" as="style" onload="this.rel='stylesheet'">
    <link href=https://freshrimpsushi.github.io/css/comment.css rel="preload" as="style" onload="this.rel='stylesheet'">
    <noscript>
        <link rel='stylesheet' href=https://freshrimpsushi.github.io/css/custum.css>
    </noscript>

    
    <link rel="canonical" href="https://freshrimpsushi.github.io/">

    
    <link rel="icon" href="https://freshrimpsushi.github.io/logo/favicon.ico">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="logo/basic.png">

    
    <style type="text/css">
        .thmbox {
            background: rgb(245, 245, 245);
             
            border-radius: 20px;
            padding: 20px;
        }
    </style>

    
    <script data-ad-client="ca-pub-4751085325232621" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    
    <meta name="google-site-verification" content="KYAokS7-6C5YuXOjatJQsiK1T0O8x4YncYFIF4tneYI" />
    <meta name="naver-site-verification" content="e5651d6f97899061897203413efc84994f04bbba" />

    
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NLV8Y9PRK1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-NLV8Y9PRK1');
    </script>

    
<meta name="title" content="라그랑주 역학과 해밀턴의 변분 원리">
<meta name="description"Content="국내 최대의 수학, 물리학, 통계학 블로그">
<meta property="og:title" content="라그랑주 역학과 해밀턴의 변분 원리"/>
<meta property="og:description" content="lagrangian mechanics and hamiltons variational principle"/>
<meta property="og:image" content=https://freshrimpsushi.github.io/logo/basic.png/>





<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "articleSection": "j_",
    "name": "라그랑주 역학과 해밀턴의 변분 원리",
    "headline": "라그랑주 역학과 해밀턴의 변분 원리",
    "alternativeHeadline": "",
    "description": "lagrangian mechanics and hamiltons variational principle",
    "inLanguage": "ko",
    "isFamilyFriendly": "true",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/freshrimpsushi.github.io\/posts\/lagrangian-mechanics-and-hamiltons-variational-principle\/"
    },
    "author" : {
        "@type": "Person",
        "name": "전기현"
    },
    "creator" : {
        "@type": "Person",
        "name": "전기현"
    },
    "accountablePerson" : {
        "@type": "Person",
        "name": "전기현"
    },
    "copyrightHolder" : "생새우초밥집",
    "copyrightYear" : "2019",
    "dateCreated": "2019-07-14T00:00:00.00Z",
    "datePublished": "2019-07-14T00:00:00.00Z",
    "dateModified": "2019-07-14T00:00:00.00Z",
    "publisher":{
        "@type":"Organization",
        "name": "생새우초밥집",
        "url": "https://freshrimpsushi.github.io/",
        "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/freshrimpsushi.github.io\/logo\/basic.png",
            "width":"32",
            "height":"32"
        }
    },
    "image": "https://freshrimpsushi.github.io/logo/basic.png",
    "url" : "https:\/\/freshrimpsushi.github.io\/posts\/lagrangian-mechanics-and-hamiltons-variational-principle\/",
    "wordCount" : "2568",
    "genre" : [ ],
    "keywords" : [ ]
}
</script>


    <title>라그랑주 역학과 해밀턴의 변분 원리</title>
</head>

<body class="main">
  <header>
    <a href="../../" rel="home">
        <p style="text-align:center; font-size: 1rem; color: black;">
            
                <img src=https://freshrimpsushi.github.io/logo/%EA%B3%A0%EC%A0%84%EC%97%AD%ED%95%99.png style="max-height: 80px; width: auto;">
            
            
            
        </p>
    </a>
</header>

  <div id="fastSearch">
  <input id="searchInput" tabindex="0">
  <ul id="searchResults">
  </ul>
</div>

  
  <div class="wrapper">
    <div class="content">
      <div class="content-box">
        
<title>라그랑주 역학과 해밀턴의 변분 원리</title>

<h1>라그랑주 역학과 해밀턴의 변분 원리</h1>
<p style="font-family: Georgia; margin-top: -20px; margin-bottom: 0px;">
  lagrangian mechanics and hamiltons variational principle
</p>
<aside>
  <div class="innerheader">
    <div class="innertic">
      
    



    </div>
    <div class="innertoc">
      
      <nav id="TableOfContents">
  <ul>
    <li><a href="#해밀턴의-변분-원리1">해밀턴의 변분 원리</a></li>
    <li><a href="#범함수">범함수</a></li>
    <li><a href="#작용과-라그랑지안">작용과 라그랑지안</a></li>
    <li><a href="#해밀턴의-원리">해밀턴의 원리</a></li>
    <li><a href="#변분">변분</a></li>
    <li><a href="#같이보기">같이보기</a></li>
  </ul>
</nav>
    </div>
  </div>
</aside>

<p>해밀턴의 원리, 범함수, 작용, 변분 등에 대해서 가능한 쉽게 설명해놓았으니 다른 곳에서 만족할만한 설명을 찾지 못했다면 끝까지 읽어보자.</p>
<h2 id="해밀턴의-변분-원리1">해밀턴의 변분 원리<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></h2>
<p>물체가 시간 $t_{1}$에서 $t_{2}$까지 운동할 때 운동 경로에 대한 라그랑지안을 적분한 것을 <strong>작용</strong><sup>action</sup>이라 하고 아래와 같이 $J$로 표기한다.</p>
<p>$$
\begin{equation}
J=\int_{t_{1}}^{t_{2}} L dt
\end{equation}
$$</p>
<p>이때 가능한 모든 운동 경로의 작용 중에서 <strong>실제 운동 경로의 작용이 최소</strong>가 된다. <strong>라그랑지안</strong><sup>Lagrangian</sup> 은 운동 에너지와 퍼텐션 에너지의 차로 정의하며 흔히 $L$로 표기한다.</p>
<p>$$
L=T-V
$$</p>
<p>위 내용은 간단히 <strong>해밀턴의 원리</strong><sup>Hamilton&rsquo;s variational principle</sup> 혹은 <strong>최소 작용의 원리</strong><sup>principle of least action</sup>라고 불린다. 최소 작용의 원리라는 이름이 붙은 이유는 $(1)$의 적분을 <strong>작용</strong> 이라 부르기 때문이다. 원래 최솟값과 극솟값은 다른 개념이지만 여기에서는 같은 의미를 가진다고 하자. 정확하게는 극값(극대 혹은 극소)이 맞다. 마리온 교재를 기준으로는 아마 1학기, 파울스 교재를 기준으로는 2학기에 배우게될 라그랑주 역학의 가장 첫번째 내용이다. 그런데 교재에 충실한 것 만으로는 이 내용을 이해하기가 굉장히 어려웠다. 새로운 개념들이 등장하는데 그게 무엇인지 친절하게 설명해주지 않는다. 예를 들어 파울스 교재에서 아래와 같은 식이 등장한다.</p>
<p>$$
\begin{equation}
\delta J =\delta \int_{t_{1}}^{t_{2}} L dt = 0
\end{equation}
$$</p>
<p>그리고선 새로 나온 기호인 $\delta$에 대한 설명은 다음과 같다.</p>
<blockquote>
<center>"$\delta$는 극값에 대한 전체 적분의 변분(變分, variation)이다."</center>
</blockquote>
<p>이걸 읽고 $\delta$가 무엇을 의미하는지 어떻게 알 수 있을까. 변분이 뭔지도 제대로 가르쳐주지 않고 그 뒤에 계산은 마구마구 한다. 등식이 왜 성립하는지도 모르니 한 줄 한 줄 읽는 속도도 너무 느리고 내용을 이해하는 것 자체가 너무 힘들었다. 그래서 라그랑주 역학을 처음 접하는 학생들을 위해서 최대한 친절하게 설명하겠다. 우선 해밀턴의 원리에 대한 내용을 기술할 때 쓰이는 용어들을 정리할 필요가 있다.</p>
<h2 id="범함수">범함수</h2>
<p>여러 자료에서 $(2)$의 적분을 범함수라고 말하는데 평범하게 공부해온 물리학과 학생이라면 범함수가 무엇인지 모르는게 정상이다. 여러분들은 대게 아래와 같이 실수를 대입하면 실수(혹은 복소수)가 나오는 것을 함수로 알고 있을 것이다.</p>
<p>$$
f(x)=x^2,\quad g(x)=e^{2x}
$$</p>
<p>그런데 함수의 수학적인 정의를 생각해보면 굳이 숫자를 대입해서 숫자가 나와야될 필요는 없다. 무언가를 대입하면 그에 대응되는 결과가 나오는 것이 함수니까 대입하는 것에 제한은 없다. 이때 어떤 <b style="color: blue">함수</b>에 <b style="color: orange">함수</b>를 대입해서 그에 따라 <b style="color: red">어떤 숫자</b>가 나올 때 <b style="color: blue">그 함수</b> 를 <b style="color: blue">범함수</b><sup>functional</sup>라고 한다. 예를 들어 아래와 같이 정의된 함수 $F$는 범함수이다.</p>
<p>$$
{\color{blue}F\big( {\color{orange}f(x)} \big)} := \int_{1}^{2} f(x) dx
$$</p>
<p>즉 함수 $F$는 어떤 함수를 $1$부터 $2$까지 정적분한 값을 함숫값으로 가진다. 실제로 계산을 해보면</p>
<p>$$
{\color{blue}F( {\color{orange} e^{x} })} = \int_{1}^2 e^x dx = {\color{red}e^2-e},\quad {\color{blue}F({\color{orange}x^2})}=\int_{1}^2 x^{2} dx = {\color{red}\frac{7}{3} }
$$</p>
<p>위와 같이 함수를 대입했을 때 실수(혹은 복소수)가 나오는 함수를 범함수라고 한다. 이어질 내용이지만 최소 작용의 원리에서 <strong>작용이 바로 범함수</strong>이다. &lsquo;각각의 운동 경로에 대한 라그랑지안&rsquo;이라는 함수를 대입했을 때 어떤 값이 나오므로 범함수이다. 범함수에 대한 수학적인 내용을 담은 글이 블로그에 있지만 링크를 소개하지는 않겠다. 아마 읽으면 더 헷갈릴터이니 웬만하면 읽지 않는 것을 추천한다. 정 궁금하면 오른쪽 상단 검색바에서 범함수를 검색해서 읽어보고 잘 모르겠으면 그냥 잊어버리자.</p>
<h2 id="작용과-라그랑지안">작용과 라그랑지안</h2>
<p>운동 에너지에서 퍼텐셜 에너지를 뺀 것을 라그랑지안이라 부르고 $L$로 표기한다.</p>
<p>$$
L=T-V
$$</p>
<p>라그랑지안은 속도, 위치, 시간에 영향을 받으므로 위치를 $y$라고 두면 아래와 같이 표기할 수도 있다.</p>
<p>$$
L=L(y^{\prime},\ y,\ t)
$$</p>
<p>라그랑지안이라는 이름은 프랑스 수학자 조제프 루이 라그랑주의 이름에서 딴 것이다. 라그랑지안을 시간에 따라서 정적분한 것을 작용, 혹은 액션이라고 부르고 흔히 $J$로 표기한다.</p>
<p>$$
J = \int_{t_{1}}^{t_{2}} L dt = \int_{t_{1}}^{t_{2}} L(y^{\prime},\ y,\ t) dt 
$$</p>
<h2 id="해밀턴의-원리">해밀턴의 원리</h2>
<p>1834년 영국의 수학자 윌리엄 로언 해밀턴이 고안한 것으로 <strong>물체가 실제로 움직이는 경로는 작용이 최소가 되게 한다는 원리</strong>이다. 이는 증명 가능한 사실이 아니라 $F=ma$처럼 자연에 존재하는 기본 원리 중 하나라고 받아들이면 된다. 예를 들어 우리가 물체를 높은 곳에서 던져서 떨어뜨릴 때 바닥까지 물체가 어떤 경로로 움직이는지 알고 싶다고 하자. 우리가 예상할 수 있는 경로는 셀 수 없이 많을 텐데 그 중에서 실제로 물체가 움직이는 경로에는 어떤 특별한 점이 있다는 거다. 각각의 경로에 대한 라그랑지안을 시간에 대해서 적분 했을 때 실제로 움직이는 경로에 대한 라그랑지안을 적분한 값이 가장 작다는 것이다. 즉 작용이 최소가 되도록 하는 경로를 찾으면 그게 실제로 물체가 움직이는 경로이다. 그래서 해밀턴의 원리는 최소 작용의 원리라고도 불린다.위의 원리를 바탕으로 물체의 운동을 다루는 것이 <strong>라그랑주 역학</strong><sup>Lagrangian mechanics</sup>이다. 놀라운 것은 뉴턴 역학과 같은 결과를 내놓는다는 것이다. 즉 표현 방법만 다를 뿐 똑같다. 뉴턴 역학을 벡터 계산을 바탕으로 물체의 움직을 다룬다면 라그랑주 역학은 스칼라(에너지)를 계산함으로써 역학을 기술한다.</p>
<h2 id="변분">변분</h2>
<p>간단히 얘기하자면 위에서 풀어서 쓴 내용을 수학적으로 정리한 것이다. 우선 쉬운 예로 2차 함수의 최솟값을 찾는 문제를 생각해보자.</p>
<p><img src="3.JPG#center" alt="3.JPG"></p>
<p>위의 그림과 같은 2차 함수가 주어졌다고 하자. 함숫값의 최솟값은 $1$이고 함숫값이 최소가 되는 곳은 $x=3$이다. 최솟값(극솟값)을 가지는 점에서는 기울기가 $0$이므로 미분했을 때 $0$이라는 것을 알고 있다. 따라서</p>
<p>$$
\dfrac{dy}{dx} \bigg|_{x=3}=0
$$</p>
<p>이다. 위의 내용을 최소 작용의 원리에 그대로 적용할 것이다.</p>
<p><img src="5D219DC61.jpg#center" alt="5D219DC61.jpg"></p>
<p>위 그림에서 나타낸 것과 같이 물체가 실제로 운동하는 경로를 $y(0, t)$라고 하자. 물체가 운동할 수 있는 임의의 경로를 위 그림과 같이 $y(\alpha, t)=y(0,t)+\alpha \eta(t)$라고 하자. 참고로 $\eta$는 그리스 문자 에타이다. $\alpha \eta(t)$는 실제 경로와 비교했을 때 오차라고 생각하면 된다. 그림과 수식을 보면 알 수 있듯이 $\alpha=0$일 때 가능한 임의의 경로 $y(\alpha, t)$는 실제 경로가 된다. 또한 최소 작용의 원리는 가능한 모든 경로에 대한 작용들 가운데 실제 경로에 대한 작용이 최소의 값이라는 내용이다. 두 내용을 합쳐서 위에서 들었던 예시를 적용시키면, 작용을 미분해서 $\alpha=0$을 대입했을 때 그 값이 $0$이라는 결과를 얻는다.</p>
<p>$$
\dfrac{\partial J}{\partial \alpha}=\dfrac{\partial }{\partial \alpha} \int_{t_{1}}^{t_{2}} L\big( y^{\prime}(\alpha,t),\ y(\alpha,t),\ t \big) dt =0
$$</p>
<p>이를 간단히 표기하면 다음과 같고 $\delta J$를 $J$의 변분이라고 부른다.</p>
<p>$$
\delta J = 0
$$</p>
<p>즉 $\delta=\dfrac{\partial }{\partial \alpha}$라고 이해하면 된다. 따라서 아래와 같은 등식이 성립한다.</p>
<p>$$
\delta \dot{y}=\dfrac{\partial }{\partial \alpha}\frac{dy}{dt}=\dfrac{d}{dt}\frac{\partial y}{\partial \alpha}=\dfrac{d}{dt}\delta y
$$</p>
<h2 id="같이보기">같이보기</h2>
<ul>
<li><a href="../1183">오일러-라그랑주 방정식</a></li>
</ul>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Grant R. Fowles and George L. Cassiday, <em>Analytical Mechanics</em> (7th Edition, 2005), p417-420&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>


<aside style="text-align: right;">
    2019-07-14&emsp;
    전기현&emsp;
    <a href="../956">🎲 1182</a>
</aside>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    
    const contentBox = document.querySelector('.content-box');
    if (contentBox) {
      renderKaTex(contentBox);
    }
    const tex = document.querySelector('.tex');
    if (tex) {
      renderKaTex(tex);
    }

    var title = '라그랑주 역학과 해밀턴의 변분 원리';
    var link = 'https:\/\/freshrimpsushi.github.io\/posts\/lagrangian-mechanics-and-hamiltons-variational-principle\/';
    var arr = new Array();
    var obj = {
      "title": title,
      "link": link
    };
    var postList = JSON.parse(localStorage.getItem('latelyViewPostList'));
    if (postList == '' || postList == null || postList == undefined || postList == 0 || postList == NaN) {
      arr.push(obj);
      localStorage.setItem('latelyViewPostList', JSON.stringify(arr));
    } else {
      var listSize = postList.length;
      for (var i = 0; i < listSize; i++) {
        if (title == postList[i].title) {
          postList.splice(i, 1);
          break;
        }
      }
      arr = postList;
      arr.push(obj);
      if (arr.length > 5) {
        arr.shift();
      }
      localStorage.setItem('latelyViewPostList', JSON.stringify(arr));
    }
  });
</script>

      </div>
      <div style="margin-bottom: 10px;">댓글</div>
<div class="area-reply">
  <div class="list-reply">
  </div>
</div>

<hr />


<div class="write-box">
  <div class="write-author-info box-account">
    <input type="hidden" name="cmt_idx" />
    <input class="ai-author" type="text" value="" placeholder="이름" />
    <input class="ai-password" type="password" value="" maxlength="20" placeholder="20자 이내 비밀번호를 입력하세요" />
  </div>
  <div class="write-content">
    <textarea class="ai-content" value="" placeholder="내용" style="IME-MODE:active;"></textarea>
  </div>
  <div class="write-button">
    <input class="write_comment" type="submit" value="등록" onclick="write_comment();" />
  </div>
  <aside class="tex" style="text-align: center;">댓글에도 $\TeX$이 적용됩니다.</aside>
</div>

<script>
  let commentRows = [];
  const listReply = document.querySelector('.list-reply');

  document.addEventListener('DOMContentLoaded', () => {
    get_all_comment();
  });

  function get_all_comment() {
    const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=getAllComment';
    postFetch(url, {
      board_idx: '1182'
    })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          commentRows = data.rows;
          render_comment(commentRows);
        }
      })
      .catch(err => console.error(err));
  }

  function render_comment(rows) {
    const badgeExceptionArr = ['류대식', '전기현', 'ㅇㅇ', '질문'];
    render_blank();
    let html = '';
    rows.map(row => {
      html += `<div id="comment${row.cmt_idx}" class="parents">`;
      html += `<div class="content-info">`;
      
      let badge = '';
      if (row.cmt_cnt > 125) {
        badge = '🥇';
      } else if (row.cmt_cnt > 25) {
        badge = '🥈';
      } else if (row.cmt_cnt > 5) {
        badge = '🥉';
      } else { }

      if (badgeExceptionArr.includes(row.author)) {
        badge = '';
      }
      html += `<div class="list-author">${badge} ${row.author}</div>`;
      html += `<div class="list-bridge">▶</div>`;
      html += `<div class="list-date">${row.datetime}</div>`;
      html += `<div class="list-button">`;
      html += `<div class="list-update-button" onclick="update_comment('${row.cmt_idx}', 'parents');">수정</div>`;
      html += `<div class="list-delete-button" onclick="delete_comment('${row.cmt_idx}', 'parents');">삭제</div>`;
      html += `</div>`; 
      html += `</div>`; // content-info
      let content = row.content;
      content = content.replace(/\n/g, '<br />');
      html += `<div class="content-text">${content}</div>`;
      html += `<div class="re-comment"><span class="re-comment-button" onclick="re_comment('${row.cmt_idx}');">답글</span></div>`;
      html += `</div>`;

      row.child.map(child => {
        html += `<div id="comment${child.cmt_idx}" class="child">`;
        html += `<div class="content-info">`;
        
        let badge = '';
        if (child.cmt_cnt > 5) {
          badge = '🥉';
        } else if (child.cmt_cnt > 25) {
          badge = '🥈';
        } else if (child.cmt_cnt > 125) {
          badge = '🥇';
        } else { }

        if (badgeExceptionArr.includes(child.author)) {
          badge = '';
        }
        html += `<div class="list-author">${badge} ${child.author}</div>`;
        html += `<div class="list-bridge">▶</div>`;
        html += `<div class="list-date">${child.datetime}</div>`;
        html += `<div class="list-button">`;
        html += `<div class="list-update-button" onclick="update_comment('${child.cmt_idx}', 'child');">수정</div>`;
        html += `<div class="list-delete-button" onclick="delete_comment('${child.cmt_idx}', 'child');">삭제</div>`;
        html += `</div>`; 
        html += `</div>`; // content-info
        let content = child.content;
        content = content.replace(/\n/g, '<br />');
        html += `<div class="content-text">${content}</div>`;
        html += `</div>`;
      });
    });
    listReply.innerHTML = html;
    renderKaTex(listReply);
  }

  function render_blank() {
    listReply.innerHTML = '';
  }

  
  function write_comment() {
    const inputAuthor = document.querySelector('.ai-author');
    const inputPassword = document.querySelector('.ai-password');
    const inputContent = document.querySelector('.ai-content');

    const author = inputAuthor.value;
    const password = inputPassword.value;
    const content = inputContent.value;

    if (author === '' || password === '' || content === '') {
      alert('빈칸을 채워주세요');
      return;
    }
    const idx = '1182';
    const board_slug = 'lagrangian-mechanics-and-hamiltons-variational-principle';
    const board_title = '라그랑주 역학과 해밀턴의 변분 원리';

    const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=writeComment';
    postFetch(url, {
      board_idx: idx,
      board_slug: board_slug,
      board_title: board_title,
      author: author,
      password: password,
      content: content
    })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          commentRows.push(data.row);
          render_comment(commentRows);
          inputAuthor.value = '';
          inputPassword.value = '';
          inputContent.value = '';

          recentRows.splice(-1, 1);
          render_recent_comment(recentRows);
        }
      })
      .catch(err => console.error(err));
  }

  
  async function update_comment(cmt_idx, type) {
    const { value: password } = await Swal.fire({
      title: '댓글 수정',
      input: 'password',
      inputPlaceholder: '글 작성 시 입력했던 패스워드를 입력하세요',
      inputAttributes: {
        maxlength: 20,
        autocapitalize: 'off',
        autocorrect: 'off'
      }
    });

    if (password) {
      const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=checkPassword';
      postFetch(url, {
        cmt_idx: cmt_idx,
        password: password
      })
        .then(res => res.json())
        .then(data => {
          if (data.ok) {
            const commnetHtml = document.querySelector(`#comment${cmt_idx}`);
            const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=getComment';
            postFetch(url, {
              cmt_idx: cmt_idx
            })
              .then(res => res.json())
              .then(data => {
                if (data.ok) {
                  const row = data.row;
                  const author = row.author;
                  const content = row.content;
                  let html = '';
                  html += `<div class="update-author-info">`;
                  html += `<input class="update-author" type="text" value="${author}" placeholder="이름" />`;
                  html += `<input class="update-password" type="password" value="${password}" placeholder="비밀번호" disabled />`;
                  html += '</div>';
                  html += `<textarea class="update-content" value="" style="IME-MODE:active;">${content}</textarea>`;
                  html += `<input class="update_comment-button" type="submit" value="수정" onclick="update_comment_click(${cmt_idx}, '${type}')" />`;
                  html += `<input class="update_comment-button" type="submit" value="취소" onclick="cancel_click(${cmt_idx})" />`;
                  commnetHtml.innerHTML = html;
                }
              })
              .catch(err => console.error(err));
          } else {
            Swal.fire('패스워드 일치 오류');
          }
        })
        .catch(err => console.error(err));
    }
  }

  
  async function delete_comment(cmt_idx, type) {
    const { value: password } = await Swal.fire({
      title: '댓글 삭제',
      text: "삭제하면 되돌릴 수 없습니다.",
      input: 'password',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      inputPlaceholder: '글 작성 시 입력했던 패스워드를 입력하세요',
      inputAttributes: {
        maxlength: 20,
        autocapitalize: 'off',
        autocorrect: 'off'
      }
    });

    if (password) {
      const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=checkPassword';
      postFetch(url, {
        cmt_idx: cmt_idx,
        password: password
      })
        .then(res => res.json())
        .then(data => {
          if (data.ok) {
            const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=deleteComment';
            postFetch(url, {
              cmt_idx: cmt_idx
            })
              .then(res => res.json())
              .then(data => {
                Swal.fire('삭제되었습니다.');
                if (type === 'parents') {
                  commentRows = commentRows.filter((row) => row.cmt_idx !== cmt_idx);
                } else if (type === 'child') {
                  commentRows.map((row) => {
                    row.child = row.child.filter((childRow) => childRow.cmt_idx !== cmt_idx);
                    row.child_cnt = row.child.length;
                  });
                } else { }
                render_comment(commentRows);
              })
              .catch(err => console.error(err));
          } else {
            Swal.fire('패스워드 일치 오류');
          }
        })
        .catch(err => console.error(err));
    }
  }

  
  function update_comment_click(cmt_idx, type) {
    const inputAuthor = document.querySelector(`#comment${cmt_idx} .update-author`);
    const inputPassword = document.querySelector(`#comment${cmt_idx} .update-password`);
    const inputContent = document.querySelector(`#comment${cmt_idx} .update-content`);

    const author = inputAuthor.value;
    const password = inputPassword.value;
    const content = inputContent.value;

    if (author === '' || password === '' || content === '') {
      alert('빈칸을 채워주세요');
    }

    const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=updateComment';
    postFetch(url, {
      cmt_idx: cmt_idx,
      author: author,
      password: password,
      content: content
    })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          Swal.fire('수정되었습니다.');
          if (type === 'parents') {
            commentRows.map((row) => {
              if (row.cmt_idx == cmt_idx) {
                row.author = data.author;
                row.content = data.content;
              }
            });
          } else if (type === 'child') {
            commentRows.map((row) => {
              if (row.cmt_idx == data.parent_cmt_idx) {
                row.child.map((child) => {
                  if (child.cmt_idx == cmt_idx) {
                    child.author = data.author;
                    child.content = data.content;
                  }
                });
              }
            });
          } else { }
          render_comment(commentRows);
          recentRows.map((row) => {
            if (row.cmt_idx == cmt_idx) {
              row.author = data.author;
              row.content = data.content;
            }
          });
          render_recent_comment(recentRows);
        }
      })
      .catch(err => console.error(err));
  }

  
  function cancel_click() {
    render_comment(commentRows);
  }

  
  function re_comment(cmt_idx) {
    const reComment = document.querySelector(`#comment${cmt_idx} .re-comment`);
    let html = '';
    html += '<div class="re-comment-box">';
    html += '<div class="re-comment-author-info">';
    html += '<input class="re-comment-author" type="text" value="" placeholder="이름" />';
    html += '<input class="re-comment-password" type="password" value="" placeholder="비밀번호" />';
    html += '</div>';
    html += '<textarea class="re-comment-content" placeholder="내용" value="" style="IME-MODE:active;"></textarea>';
    html += `<input class="re-comment-btn" type="submit" value="등록" onclick="re_comment_click(${cmt_idx})" />`;
    html += `<input class="re-comment-btn" type="submit" value="취소" onclick="cancel_click(${cmt_idx})" />`;
    html += '</div>';

    reComment.innerHTML = html;
  }

  function re_comment_click(cmt_idx) {
    const inputAuthor = document.querySelector(`#comment${cmt_idx} .re-comment-author`);
    const inputPassword = document.querySelector(`#comment${cmt_idx} .re-comment-password`);
    const inputContent = document.querySelector(`#comment${cmt_idx} .re-comment-content`);

    const author = inputAuthor.value;
    const password = inputPassword.value;
    const content = inputContent.value;

    if (author === '' || password === '' || content === '') {
      alert('빈칸을 채워주세요');
      return;
    }

    const board_idx = '1182';
    const board_slug = 'lagrangian-mechanics-and-hamiltons-variational-principle';
    const board_title = '라그랑주 역학과 해밀턴의 변분 원리';

    const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=writeReComment';
    postFetch(url, {
      board_idx: board_idx,
      board_slug: board_slug,
      board_title: board_title,
      cmt_idx: cmt_idx,
      author: author,
      password: password,
      content: content
    })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          commentRows.map((row) => {
            if (row.cmt_idx == cmt_idx) {
              row.child.push(data.row);
            }
          });
          render_comment(commentRows);

          recentRows.splice(-1, 1);
          recentRows.unshift(data.row);
          render_recent_comment(recentRows);
        }
      })
      .catch(err => console.error(err));
  }

</script>
    </div>

    <div class="sidebar">
      

<aside>
<form method="get" action="../../search" style="border: 1px;">
<div class="field">

<input type="text" id="searchtext" placeholder = "통합검색" class="input_text" name="s"
style="background-color: #EEEEEE; text-align: center; width: 100%; font-size: 1.5rem; border: 1px; border-radius: 5px; padding-top:5px; padding-bottom:5px;">
</div>
</form>

<script type="text/javascript">
    var goIndex = function(){
        var idx = document.getElementsByName("idx")[0].value;
        var local_idx = "http://localhost:1313/posts/" + idx;
        location.replace(local_idx)
    }
</script>
</p>






        <p style="text-align: center;">
        <a href="https://freshrimpsushi.github.io/categories/%EA%B3%A0%EC%A0%84%EC%97%AD%ED%95%99/"
            style="background-color: rgba(0, 0, 0, 0.8); color: orange;
            border-radius:10px; padding: 5px;">
            📂고전역학</a>
        </p>
        


<div class="category">

</div>

<aside style="display:flex;">
  ● 를 클릭해서 관심있는 분야만 강조해보세요.
      <div class="resetmute">
        <button class="sb-btn btnReset"
          style = "border-radius:5px; border:0px">reset</button>
        <button class="sb-btn btnMute"
          style = "border-radius:5px; border:0px">mute</button>
      </div>
  </aside>

<script>
  const color = {green: '#33cc33', yellow: '#ffcc00', red: '#ff3333', black: '#000000'};
  const categoryRows = [
    [
      { idx: 1, name: '함수', size: '81', color: color.green },
      { idx: 2, name: '보조정리', size: '21', color: color.green },
      { idx: 3, name: '집합론', size: '47', color: color.green },
      { idx: 4, name: '정수론', size: '89', color: color.green },
      { idx: 5, name: '기하학', size: '132++', color: color.yellow },
      { idx: 6, name: '행렬대수', size: '68', color: color.green },
      { idx: 7, name: '선형대수', size: '47', color: color.green },
      { idx: 8, name: '추상대수', size: '77', color: color.green },
      { idx: 9, name: '위상수학', size: '63', color: color.green },
      { idx: 10, name: '그래프이론', size: '50', color: color.green }
    ],
    [
      { idx: 1, name: '해석개론', size: '96', color: color.green },
      { idx: 2, name: '다변수벡터해석', size: '21', color: color.green },
      { idx: 3, name: '복소해석', size: '71', color: color.green },
      { idx: 4, name: '측도론', size: '59', color: color.green },
      { idx: 5, name: '푸리에해석', size: '51', color: color.green },
      { idx: 6, name: '초함수론', size: '23', color: color.green },
      { idx: 7, name: '토모그래피', size: '19', color: color.green },
      { idx: 8, name: '동역학', size: '70++', color: color.green }
    ],
    [
      { idx: 1, name: '거리공간', size: '33', color: color.green },
      { idx: 2, name: '바나흐공간', size: '32', color: color.green },
      { idx: 3, name: '힐베르트공간', size: '30', color: color.green },
      { idx: 4, name: '르벡공간', size: '30', color: color.green }
    ],
    [
      { idx: 1, name: '상미분방정식', size: '57', color: color.green },
      { idx: 2, name: '편미분방정식', size: '50', color: color.green },
      { idx: 3, name: '확률미분방정식', size: '25', color: color.green }
    ],
    [
      { idx: 1, name: '매트랩', size: '16', color: color.green },
      { idx: 2, name: '수치해석', size: '53', color: color.green },
      { idx: 3, name: '최적화이론', size: '27', color: color.green }
    ],
    [
      { idx: 1, name: '수리물리', size: '50', color: color.red },
      { idx: 2, name: '고전역학', size: '38', color: color.green },
      { idx: 3, name: '전자기학', size: '49', color: color.green },
      { idx: 4, name: '양자역학', size: '52', color: color.yellow },
      { idx: 5, name: '열물리학', size: '24', color: color.green }
    ],
    [
      { idx: 1, name: 'R', size: '53', color: color.green },
      { idx: 2, name: '데이터확보', size: '22', color: color.green },
      { idx: 3, name: '데이터과학', size: '22', color: color.red },
      { idx: 4, name: '통계적검정', size: '20++', color: color.green },
      { idx: 5, name: '통계적분석', size: '61', color: color.yellow },
      { idx: 6, name: '수리통계학', size: '109', color: color.green },
      { idx: 7, name: '분포이론', size: '57', color: color.green },
      { idx: 8, name: '확률론', size: '72', color: color.green },
      { idx: 9, name: '위상데이터분석', size: '38', color: color.red }
    ],
    [
      { idx: 1, name: '줄리아', size: '118', color: color.green },
      { idx: 2, name: '프로그래밍', size: '32', color: color.green },
      { idx: 3, name: '알고리즘', size: '28', color: color.red },
      { idx: 4, name: '머신러닝', size: '50++', color: color.green },
      { idx: 5, name: '세이버메트릭스', size: '11', color: color.yellow },
      { idx: 6, name: '논문작성', size: '13', color: color.green },
      { idx: 7, name: '교과과정', size: '53', color: color.green },
      { idx: 8, name: '생새우초밥지', size: '1', color: color.black }
    ]
  ];

  document.addEventListener('DOMContentLoaded', () => {
    const blindList = JSON.parse(localStorage.getItem('blindList'));
    if (blindList == '' || blindList == null || blindList == undefined || blindList == 0 || blindList == NaN) {
      localStorage.setItem('blindList', null);
    }
    render_category(categoryRows);

    blind_category(blindList);

    const btnReset = document.querySelector('.btnReset');
    btnReset.addEventListener('click', () => {
      let arr = new Array();
      localStorage.setItem('blindList', JSON.stringify(arr));
      blind_category(arr);
    });

    const btnMute = document.querySelector('.btnMute');
    btnMute.addEventListener('click', () => {
      let arr = new Array();
      for(let i = 0; i < categoryRows.length; i++) {
        categoryRows[i].map(row => {
          const data = {mainIdx: i, subIdx: row.idx};
          arr.push(data);
        });
      }
      localStorage.setItem('blindList', JSON.stringify(arr));
      blind_category(arr);
    });
  });

  function render_category(rows)
  {
    const category = document.querySelector('.category');
    let html = '';
    for(let i = 0; i < rows.length; i++) {
      rows[i].map(row => {
        html += `<div id="cate${i}-${row.idx}" class="cate etewsert">`;
        html += `<span onclick="check_blind(${i}, ${row.idx});" style="cursor: pointer; color: ${row.color}">●</span>`;
        html += `<a href="https:\/\/freshrimpsushi\.github\.io\/categories/${row.name.toLowerCase()}/">`; // R카테고리 같은 경우 소문자로 바꿀 필요가 있음
        html += ` ${row.name} (${row.size})</a><br>`;
        html += '</div>';
      });
      html += '<hr>';
    }

    category.innerHTML = html;
  }

  /* 좌측 버튼 클릭시 블라인드 되는 함수 */
  function check_blind(mainIdx, subIdx)
  {
    const cateDiv = document.querySelector(`#cate${mainIdx}-${subIdx}`);
    let arr = new Array();
    const data = {mainIdx, subIdx};
    let blindList = JSON.parse(localStorage.getItem('blindList'));
    if (blindList == '' || blindList == null || blindList == undefined || blindList == 0 || blindList == NaN) {
      arr.push(data);
      localStorage.setItem('blindList', JSON.stringify(arr));
      cateDiv.className += ' blind';
    } else {
      arr = blindList;
      let tempArr = null;
      for(let i = 0; i < arr.length; i++) {
        if(arr[i].mainIdx == mainIdx && arr[i].subIdx == subIdx) {
          tempArr = arr.filter(a => a.mainIdx != mainIdx || a.subIdx != subIdx);
          break;
        }
      }
      
      if(tempArr === null) {
        arr.push(data);
        localStorage.setItem('blindList', JSON.stringify(arr));
        cateDiv.className += ' blind';
      } else {
        localStorage.setItem('blindList', JSON.stringify(tempArr));
        cateDiv.className = 'cate';
      }
    }
  }

  /* blind되도록 랜더링하는 함수 */
  function blind_category(blindList)
  {
    const cateDiv = document.querySelectorAll('.cate');
    cateDiv.forEach(div => {
      div.className = 'cate';
    });
    if(blindList !== null) {
      blindList.map(list => {
        const blindDiv = document.querySelector(`#cate${list.mainIdx}-${list.subIdx}`);
        blindDiv.className += ' blind';
      });
    }
  }
</script>

</aside>

<aside>
<p><b>최근에 본 포스트</b></p>
<aside>
  <div class="lately-viewed-list" style="padding-left: 4px;">
  </div>
</aside>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const postList = JSON.parse(localStorage.getItem('latelyViewPostList'));

    const list = document.querySelector('.lately-viewed-list');
    let html = '';
    if (postList == '' || postList == null || postList == undefined || postList == 0 || postList == NaN) {
      localStorage.setItem('latelyViewPostList', null);
      html += '<div class="lv-list">';
      html += ' · 열람한 포스트가 없습니다.';
      html += '</div>';
      list.innerHTML = html;
    } else {
      for (let i = (postList.length - 1); i >= 0; i--) {
        html += '<div class="lv-list">';
        html += `<a href="${postList[i].link}"> · ${postList[i].title}</a>`;
        html += '</div>';
      }
      list.innerHTML = html;
    }
  });
</script>
</aside>

<aside>
    <h2></h2>
    <ul>
    </ul>
</aside>

<aside>
  <p><b>최근 댓글</b></p>
  <div class="current-reply">
  </div>
</aside>

<script>
  const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/recent_comment.php?action=getCurrentComment';
  let recentRows = []; 
  fetch(url)
    .then(res => res.json())
    .then(data => {
      if (data.ok) {
        recentRows = data.rows;
        render_recent_comment(recentRows);
      }
    })
    .catch(err => console.error(err));

  
  function render_recent_comment(rows) {
    const currentReply = document.querySelector('.current-reply');
    let html = '';
    rows.map(row => {
      let link = 'https:\/\/freshrimpsushi.github.io\/';
      if (row.board_idx > -1) {
        link += `/posts/${row.board_slug}#comment${row.cmt_idx}`;
      } else if (row.board_idx == -1) {
        link += `#comment${row.cmt_idx}`;
      } else {
        link += `/categories/${row.board_title}#comment${row.cmt_idx}`;
      }
      html += `<div class="current-reply-list">`;
      html += `<a href="${link}">`;
      html += `<b> - ${row.author}</b>: `;
      html += `${row.content}`;
      html += `</a>`;
      html += `</div>`;
    });
    currentReply.innerHTML = html;
    renderKaTex(currentReply);
  }
</script>








    </div>
  </div>
  <footer>
  <aside>
    <div>
      <p style="text-align: center">© 생새우초밥집 / Powered by 류대식, 전기현</p>
      <p style="text-align: center"><img src=https://freshrimpsushi.github.io/logo/gmail.png width=16px> Contact:
        freshrimpsushi@gmail.com<br>
        <img src=https://freshrimpsushi.github.io/logo/instagram.png width=16px> www.instagram.com/freshrimpsushi
      </p>
    </div>

    
    

    <script src=https://freshrimpsushi.github.io/js/fuse.js></script> 
<script src=https://freshrimpsushi.github.io/js/fastsearch.js></script>




<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/katex.min.js"
  integrity="sha512-5ufNcHqOYgilGEHPfuRIQ5B/vDS1M8+UC+DESZ5CwVgGTg+b2Ol/15rYL/GiCWJ/Sx8oVo0FPFok1dPk8U9INQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/contrib/auto-render.min.js"
  integrity="sha512-ZA/RPrAo88DlwRnnoNVqKINnQNcWERzRK03PDaA4GIJiVZvGFIWQbdWCsUebMZfkWohnfngsDjXzU6PokO4jGw=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  
  function renderKaTex(target) {
    renderMathInElement(target, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
      ],
      trust: true,
      trust: (context) =>
        ["\\htmlId", "\\href", "\\includegraphics"].includes(context.command),
      macros: {
        "\\eqref": "\\href{###1}{(\\text{#1})}",
        "\\ref": "\\href{###1}{\\text{#1}}",
        "\\label": "\\htmlId{#1}{}",
        "\\for": "\\text{ for }",
        "\\and": "\\text{ and }",
        "\\or": "\\text{ or }",
        "\\st": "\\text{ s.t. }",
        "\\by": "\\text{ by }",
        "\\on": "\\text{ on }",
        "\\if": "\\text{ if }",
        "\\with": "\\text{ with }",
        "\\sgn": "\\operatorname{sgn}",
        "\\sign": "\\operatorname{sign}",
        "\\sinc": "\\operatorname{sinc}",
        "\\diag": "\\operatorname{diag}",
        "\\diam": "\\operatorname{diam}",
        "\\trace": "\\operatorname{Tr}",
        "\\Re": "\\operatorname{Re}",
        "\\Im": "\\operatorname{Im}",
        "\\Poi": "\\operatorname{Poi}",
        "\\span": "\\operatorname{span}",
        "\\supp": "\\operatorname{supp}",
        "\\rank": "\\operatorname{rank}",
        "\\nullity": "\\operatorname{nullity}",
        "\\Ric": "\\operatorname{Ric}",
        "\\rcurs":
        "\\includegraphics[height=0.4em, width=0.45em, alt=KA logo]{https://upload.wikimedia.org/wikipedia/commons/a/a9/Script-r.png}",
      },
      throwOnError: false,
    });
  }
</script>


<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script src=https://freshrimpsushi.github.io/js/common.js></script>
  </aside>
</footer>
</body>

</html>