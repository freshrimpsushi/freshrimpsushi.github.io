<!DOCTYPE html>
<html class="blog">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    
    

    
    <meta name="NaverBot" content="All" />
    <meta name="NaverBot" content="index,follow" />
    <meta name="Yeti" content="All" />
    <meta name="Yeti" content="index,follow" />

    
    
    <link rel="icon" href="https://freshrimpsushi.github.io/ko/logo/favicon.ico">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="logo/basic.png">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/katex.min.css"
        integrity="sha512-vJqxkZ+Sugf/6WRlpcxN01qVfX/29hF6qc33eHF1va3NgoV+U+wCi+uTAsQ10sDoGyBxHLdaHvGwDlV3yVYboA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href=https://freshrimpsushi.github.io/ko/css/style.css rel="preload" as="style" onload="this.rel='stylesheet'">
    <link href=https://freshrimpsushi.github.io/ko/css/comment.css rel="preload" as="style" onload="this.rel='stylesheet'">

    
    <style type="text/css">
        .thmbox {
            background: rgb(245, 245, 245);
             
            border-radius: 20px;
            padding: 20px;
        }
    </style>

    
    <script data-ad-client="ca-pub-4751085325232621" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    
    <meta name="google-site-verification" content="KYAokS7-6C5YuXOjatJQsiK1T0O8x4YncYFIF4tneYI" />
    <meta name="naver-site-verification" content="e5651d6f97899061897203413efc84994f04bbba" />

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NLV8Y9PRK1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-NLV8Y9PRK1');
    </script>

    <title>머신러닝에서 강화학습이란</title>

    
</head>

<meta name="title" content="머신러닝에서 강화학습이란">
<meta name="description"Content="국내 최대의 수학, 물리학, 통계학 블로그">
<meta property="og:title" content="머신러닝에서 강화학습이란"/>
<meta property="og:description" content="reinforcement learning in machine learning"/>
<meta property="og:image" content=https://freshrimpsushi.github.io/ko/logo/basic.png/>


<link rel="canonical" href="https://freshrimpsushi.github.io/ko/"/>
<link rel="alternate" hreflang="en" href="https://freshrimpsushi.github.io/en/"/>
<link rel="alternate" hreflang="jp" href="https://freshrimpsushi.github.io/jp/"/>






<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "articleSection": "j_",
    "name": "머신러닝에서 강화학습이란",
    "headline": "머신러닝에서 강화학습이란",
    "alternativeHeadline": "",
    "description": "reinforcement learning in machine learning",
    "inLanguage": "ko",
    "isFamilyFriendly": "true",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/freshrimpsushi.github.io\/ko\/posts\/3029\/"
    },
    "author" : {
        "@type": "Person",
        "name": "전기현"
    },
    "creator" : {
        "@type": "Person",
        "name": "전기현"
    },
    "accountablePerson" : {
        "@type": "Person",
        "name": "전기현"
    },
    "copyrightHolder" : "생새우초밥집",
    "copyrightYear" : "2021",
    "dateCreated": "2021-02-04T00:00:00.00Z",
    "datePublished": "2021-02-04T00:00:00.00Z",
    "dateModified": "2021-02-04T00:00:00.00Z",
    "publisher":{
        "@type":"Organization",
        "name": "생새우초밥집",
        "url": "https://freshrimpsushi.github.io/ko/",
        "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/freshrimpsushi.github.io\/ko\/logo\/basic.png",
            "width":"32",
            "height":"32"
        }
    },
    "image": "https://freshrimpsushi.github.io/ko/logo/basic.png",
    "url" : "https:\/\/freshrimpsushi.github.io\/ko\/posts\/3029\/",
    "wordCount" : "3706",
    "genre" : [ ],
    "keywords" : [ ]
}
</script>


<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src=https://freshrimpsushi.github.io/ko/js/common.js></script>

<body class="main">
  <header>
    <a href= https://freshrimpsushi.github.io/ko/ rel="home">
        <p style="text-align:center; font-size: 1rem; color: black;">
            
                <img src=https://freshrimpsushi.github.io/ko/logo/%EB%A8%B8%EC%8B%A0%EB%9F%AC%EB%8B%9D.png style="height: auto; max-width: 16%;">
            
            
            
        </p>
    </a>
</header>

   
<script type="text/javascript">
    var goIndex = function(){
        var idx = document.getElementsByName("idx")[0].value;
        var local_idx = 'https:\/\/freshrimpsushi.github.io\/ko\/' + "posts/" + idx;
        location.replace(local_idx)
    }
</script>



  <script>
  document.addEventListener("DOMContentLoaded", () => {
    fetch('https://api64.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {
        return data.ip
      })
      .then(ip => {
        const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/ip_checker.php';
        return postFetch(url, { user_ip: ip });
      })
      .then(res => res.json())
      .then(data => {
        if (!data.ok) {
          alert('차단된 IP입니다.\nContact:\nfreshrimpsushi@gmail.com')
          window.location.href = 'https://google.com';
        }
      })
      .catch(err => console.error(err));
  });
</script>
  <form method="get" action="/ko/search" style="border: 1px; text-align: center;">
    <div class="field">
    <input type="text" id="searchtext" placeholder = "🔍︎" class="input_text" name="s"
    style="background-color: #EEEEEE; text-align: center; width: 200px; font-size: 1.5rem;
    border: 1px; border-radius: 5px; padding-top:5px; padding-bottom:5px; margin-bottom: 1.5rem">
    </div>
</form>
  <div style="text-align: center;">
    
    <a href="javascript:void(0);" onclick="changeLanguage('ko')">한국어</a> |
    <a href="javascript:void(0);" onclick="changeLanguage('en')">English</a> |
    <a href="javascript:void(0);" onclick="changeLanguage('jp')">日本語</a>
</div>

<script>
    function changeLanguage(languageCode) {
        
        var currentUrl = window.location.href;

        var newUrl = currentUrl.replace(/\/(ko|en|jp)\//i, '/' + languageCode + '/');
        
        if (currentUrl.includes('localhost')) {
            
            var port;
            switch (languageCode) {
                case 'ko':
                    port = 1313;
                    break;
                case 'en':
                    port = 1314;
                    break;
                case 'jp':
                    port = 1315;
                    break;
                default:
                    port = 1313; 
            }

            

            
            newUrl = 'http://localhost:' + port + '/' + languageCode + '/' + newUrl.split('/' + languageCode + '/')[1];
        }
        window.location.href = newUrl;
    }
</script>
  
  
  <div class="wrapper">
    <div class="content">
      <div class="content-box">
        
<title>머신러닝에서 강화학습이란</title>




        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <a href="https://freshrimpsushi.github.io/ko/categories/%EB%A8%B8%EC%8B%A0%EB%9F%AC%EB%8B%9D/"
            style="background-color: rgba(0, 0, 0, 0.8); color: orange;
            border-radius:10px; padding: 5px;">
            📂머신러닝</a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        


<h1>머신러닝에서 강화학습이란</h1>


<aside>
  <div class="innerheader">
    <div class="innertoc">
      <b>목차</b>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#정의">정의</a></li>
    <li><a href="#설명1">설명</a></li>
    <li><a href="#강화학습의-문제-격자-모델">강화학습의 문제: 격자 모델</a>
      <ul>
        <li><a href="#에이전트">에이전트</a></li>
        <li><a href="#상태">상태</a></li>
        <li><a href="#행동">행동</a></li>
        <li><a href="#정책">정책</a></li>
        <li><a href="#보상">보상</a></li>
        <li><a href="#환경">환경</a></li>
        <li><a href="#에피소드">에피소드</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>    
  </div>
</aside>

<h2 id="정의">정의</h2>
<p>강화학습이란, <strong>에이전트</strong>가 <strong>환경</strong>과 상호작용하여 <strong>누적 보상</strong>을 최대화하는 <strong>정책</strong>을 찾을 수 있도록 하는 것이다.</p>
<h2 id="설명1">설명<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></h2>
<p>강화학습을 이루고 있는 요소들은 다음과 같다.</p>
<ul>
<li><strong>에이전트<sup>agent</sup></strong>: 주어진 상태에 대해서, 정책에 따라 행동을 결정한다.</li>
<li><strong>스테이트<sup>state, 상태</sup></strong>: 에이전트가 처한 상황을 말한다.</li>
<li><strong>액션<sup>action, 행동</sup></strong>: 에이전트가 주어진 상태에서 취할 수 있는 선택지를 말한다.</li>
<li><strong>폴리시<sup>policy, 정책</sup></strong>: 에이전트가 주어진 상태에서 행동을 결정하는 전략을 말한다.</li>
<li><strong>리워드<sup>reward, 보상</sup></strong>: 에이전트가 주어진 상태에서 선택한 행동에 따라서 받는 점수를 말한다. 에이전트가 달성해야할 목표라고 볼 수 있다.</li>
<li><strong>환경<sup>environment</sup></strong>: 에이전트가 주어진 상태에서 어떠한 행동을 결정하면, MDP에 따라 다음 상태와 그에 따른 보상을 결정한다.</li>
<li><strong>에피소드<sup>episode</sup></strong>: 에이전트와 환경의 상호작용이 시작된 때부터 끝날 때까지를 말한다.</li>
</ul>
<p>이를 여러 상황에 비유하면 다음과 같다.</p>
<table>
<thead>
<tr>
<th style="text-align:center">강화학습</th>
<th style="text-align:center">시험공부</th>
<th style="text-align:center">바둑</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">에이전트</td>
<td style="text-align:center">학생</td>
<td style="text-align:center">바둑기사</td>
</tr>
<tr>
<td style="text-align:center">스테이트</td>
<td style="text-align:center">시험까지남은날짜</td>
<td style="text-align:center">바둑판</td>
</tr>
<tr>
<td style="text-align:center">액션</td>
<td style="text-align:center">공부, 음주, 게임 등</td>
<td style="text-align:center">수 놓기</td>
</tr>
<tr>
<td style="text-align:center">폴리시</td>
<td style="text-align:center">날짜별 공부 계획</td>
<td style="text-align:center">전략</td>
</tr>
<tr>
<td style="text-align:center">리워드</td>
<td style="text-align:center">시험점수</td>
<td style="text-align:center">승패</td>
</tr>
<tr>
<td style="text-align:center">에피소드</td>
<td style="text-align:center">시험기간</td>
<td style="text-align:center">한 판</td>
</tr>
</tbody>
</table>
<h2 id="강화학습의-문제-격자-모델">강화학습의 문제: 격자 모델</h2>
<p>강화학습을 설명하기 위한 대표적인 예시로 격자 모델<sup>grid world</sup>이 있다(영어로 말할 땐 보통 grid 'world'라 하고, 한국어로 말할 땐 격자 '모델'이라는 표현을 많이 쓴다). 이제 다음의 격자 모델을 예시로 들어 각 요소들을 구체적으로 설명하겠다. 한 번에 상하좌우 네 방향 중 하나로 한 칸씩 움직일 수 있는 로봇이 아래와 같은 $4 \times 4$ 격자에서 움직이는 경우를 생각해보자. 시작칸은 $\boxed{\ 2\ }$부터 $\boxed{15}$까지 임의로 정해지고, 로봇이 $\fcolorbox{black}{darkgray}{\ 1\ }$ 혹은 $\fcolorbox{black}{darkgray}{16}$까지 최단거리로 가는 것이 목표라고 하자.</p>
<h3 id="에이전트">에이전트</h3>
<p>강화학습에서 에이전트란 학습을 하는 주체로 설명되지만, 실재하지는 않는다. 후술할 다른 개념들이 확률변수 등으로 정의되는 것과는 달리, 에이전트는 명확한 수학적인 정의가 없다. 따라서 강화학습에 대한 이론 공부는 에이전트라는 대상이 없이도 가능하고, 실제로도 그렇다. 강화학습 이론에서 본질적으로 에이전트를 의미하는 것은 정책이다. 다만 직관적으로는 학습을 하는 대상이 있다고 생각하는 것이 편하므로, &ldquo;에이전트가 행동한다&rdquo;, &ldquo;에이전트의 상태가 바뀌었다&rdquo; 등과 같이 표현한다. 에이전트는 단지 컴퓨터 시뮬레이션(특히 게임)에서 캐릭터와 같이 <strong>학습하는 것처럼 보이는 것</strong>일 뿐이다. 가령 격자 모델에서 에이전트가 아래의 오른쪽 그림과 같이 이동하는 것은 단순히 상태의 나열으로도 표현할 수 있다.
$$
\boxed{\ 3\ } \to \boxed{\ 2\ } \to \fcolorbox{black}{darkgray}{\ 1\ }
$$
$3, 2, 1$을 순서대로 <code>print</code>하기만 해도 된다. 강화학습의 끝에 결국 우리가 얻고자 하는 것은 본질적으로 정책이니까, 에이전트라는 것을 정의하지 않아도 학습할 수 있다. 한마디로 에이전트란 <b>정책의 시각화(실재화)</b>라고 할 수 있다.</p>
<p>물론 위의 얘기는 이론과 컴퓨터 시뮬레이션에서 그렇다는거고, 자율주행과 같은 실제 응용에서는 정책에 따라 실제로 움직이는 드론이나 자동차가 필요하다. 이 때 드론, 자동차와 같은 로봇이나 기계들이 에이전트가 되고, 없으면 정책의 학습이 불가능하다.</p>
<h3 id="상태">상태</h3>
<!-- $$
\huge
\fcolorbox{black}{darkgray}{\ 1\ }\boxed{\ 2\ }\boxed{\ 3\ }\boxed{\ 4\ } \\\ 
\boxed{\ 5\ }\boxed{\ 6\ }\boxed{\ 7\ }\boxed{\ 8\ } \\\ 
\boxed{\ 9\ }\boxed{10}\boxed{11}\boxed{12} \\\ 
\boxed{13}\boxed{14}\boxed{15}\fcolorbox{black}{darkgray}{16}
$$ -->
<!-- 
$\boxed{\ 2\ }$

$\boxed{15}$

$\fcolorbox{black}{darkgray}{\ 1\ }$
 
$\fcolorbox{black}{darkgray}{16}$ -->
<p><img src="1.PNG#center" alt="1.PNG"></p>
<!-- 수학적인 정의를 얘기하기 전에  -->
<p><strong>상태</strong><sup>state</sup>는 <a href="../1433">확률변수</a>이며 state의 앞글자를 따서 $S$라고 표기한다. 에피소드는 시간에 따라 순차적으로 진행되기 때문에 인덱스로 $t$를 쓴다. 따라서 타임스텝이 $t$일 때의 스테이트 함수를 $S_{t}$라고 표기한다. 처음 스테이트는 보통 $t=0$으로 나타낸다. 정리하면 $S_{t}$는 시간이 $t$일 때 각각의 격자들에 대해서 다음과 같이 함숫값을 주는 함수이다.</p>
<p>$$
S_{t} \left( \boxed{ N } \right) = n,\quad 1\le n \le 16
$$</p>
<p>이때 가능한 모든 상태값(상태함수의 함숫값)들의 집합을 $\mathcal{S}\subset \mathbb{R}$라고 표기하고, 이의 원소를 $s$로 표기한다.</p>
<p>$$
\mathcal{S} = \left\{ s_{1}, s_{2},\dots \right\}
$$</p>
<p>그러면 위 격자모델에 대한 상태함수는 다음과 같다.</p>
<p>$$
S_{t} : \left\{ \fcolorbox{black}{darkgray}{\ 1\ } , \boxed{\ 2\ }, \dots, \boxed{15}, \fcolorbox{black}{darkgray}{16} \right\} \to \mathcal{S}
\\ S_{t} \left( \boxed{\ n\ } \right) = s_{n} = n,\quad 1\le n \le 16
$$</p>
<p>그러면 시간이 $t$일 때 상태값이 $s_{6}$였다가 다음 타임스텝에서 상태값이 $s_{10}$으로 바뀔 <a href="../1431">확률</a>은 다음과 같다.</p>
<p>$$
P \left( S_{t+1} = s_{10} | S_{t} = s_{6}  \right)
$$</p>
<p>도달한 순간 에피소드가 끝나게 되는 상태를 <strong>터미널 스테이트</strong><sup>terminal state</sup>라고 한다. 위 격자 모델에서 터미널 스테이트는 $\fcolorbox{black}{darkgray}{1}, \fcolorbox{black}{darkgray}{16}$이다.</p>
<!-- $\fcolorbox{black}{darkgray}{\ 1\ }$

$\fcolorbox{black}{darkgray}{16}$

$\fcolorbox{black}{darkgray}{N}$

$\boxed{N}$ -->
<h3 id="행동">행동</h3>
<p><strong>행동</strong><sup>action</sup>이란 에이전트가 현재 상태에서 취할 수 있는 선택지를 말하며 이 또한 확률변수이다. action의 앞글자를 따와서 $A_{t}$로 표기한다. 위의 격자모델 예시에서는 $\boxed{2}$ ~ $\boxed{15}$에서 각각 상하좌우를 선택할 수 있다. 가능한 모든 행동값(행동함수의 함숫값)들의 집합을 $\mathcal{A}\subset \mathbb{R}$라고 표기하고, 이의 원소를 $a$라고 표기한다.</p>
<p>$$
\mathcal{A} = \left\{ a_{1}, a_{2}, \dots \right\}
$$</p>
<p>그러면 타임스텝 $t$에서의 행동함수는 다음과 같다.</p>
<p>$$
A_{t} : \left\{ \uparrow, \rightarrow, \downarrow, \leftarrow \right\} \to \mathcal{A} \\
\begin{cases}
A_{t}(\uparrow)    = a_{1} \\
A_{t}(\rightarrow) = a_{2} \\
A_{t}(\downarrow)  = a_{3} \\
A_{t}(\leftarrow)  = a_{4}
\end{cases}
$$</p>
<p>에이전트는 주어진 상태에서 확률에 따라 행동을 결정한다. 예를들어 타임스텝이 $t$일 때 상태값이 $s_{6}$인 상황에서 행동 $a_{1}$을 선택한 확률은 다음과 같다.</p>
<p>$$
P(A_{t} = a_{1} | S_{t} = s_{6})
$$</p>
<h3 id="정책">정책</h3>
<p><strong>정책</strong><sup>policy</sup>은 상태 $s$에서 행동 $a$를 결정할 확률을 모든 $s$와 $a$에 대해서 명시한 것을 말하며 $\pi$로 표기한다. 게임이나 전쟁으로 비유하자면 전략이다. 격자모델 예시에서 행동을 결정할 확률이 $\dfrac{1}{4}$로 모두 같다고 하면 정책 $\pi$는 다음과 같다.</p>
<p>$$
\pi
\begin{cases}
P(a_{1} | s_{2})  = \dfrac{1}{4} \\
P(a_{2} | s_{2})  = \dfrac{1}{4} \\
P(a_{3} | s_{2})  = \dfrac{1}{4} \\
\vdots \\
P(a_{2} | s_{15}) = \dfrac{1}{4} \\
P(a_{3} | s_{15}) = \dfrac{1}{4} \\
P(a_{4} | s_{15}) = \dfrac{1}{4}
\end{cases} \quad \text{or} \quad
\pi : \mathcal{S} \times \mathcal{A} \to [0,1]
$$</p>
<p>물론 이는 최적화된 정책은 아니다. 간단히 $\boxed{2}$의 경우만 생각해봐도 위쪽으로 가면 격자 밖으로 벗어난 것이므로 위쪽으로 갈 확률 자체가 아예 없는 것이 더 나은 정책이다. 따라서 아래의 그림에서 $\pi_{1}$보다 $\pi_{2}$가 더 좋은 정책이라고 말할 수 있다.</p>
<p><img src="2.PNG#center" alt="2.PNG"></p>
<p>강화학습 알고리즘의 목표는 최적의 정책을 찾는 것이다. 그러면 최적의 정책은 어떻게 찾느냐 하는건데, 정책의 좋은 정도를 평가하는 <strong>가치함수</strong><sup>value function</sup>를 통해서 찾을 수 있다.</p>
<h3 id="보상">보상</h3>
<p><strong>보상</strong><sup>reward</sup>이란 주어진 상태에서 에이전트가 선택한 행동에 따라 실수를 매핑하는 함수이며 reward의 앞글자를 따서 $R_{t}$라 표기한다. 모든 보상값(보상함수의 함숫값)들의 집합을 $\mathcal{R} \subset \mathbb{R}$이라 표기하며, 이의 원소를 $r$으로 표기한다.</p>
<p>$$
\mathcal{R} = \left\{ r_{1}, r_{2}, \dots \right\} \\
R_{t} = \mathcal{S} \times \mathcal{A} \to \mathcal{R}
$$</p>
<p>보상은 한 번의 타임스텝마다 한 번씩 받게 되며 한 번의 에피소드에서 받은 총 보상, 그러니까 누적된 보상이 가장 크게 끔 하는 정책을 찾는 것이 강화학습의 궁극적인 목표이다.</p>
<p>그렇다면 왜 각각의 타임스텝에서의 보상보다 누적 보상이 커지도록 하는 것인지 궁금할 수 있다. 이는 시험공부로 비유하면 쉽게 이해가 갈 것이다. 시험기간동안 매일 저녁에 공부 대신 술 마시고 놀거나 게임을 하면 당장은 공부를 하는 것보다 더 즐거울 것이다. 하지만 누적보상, 그러니까 시험 성적은 개판일 것이다. 따라서 당장은 공부를 하는 것이 지치고 힘들지라도 미래의 큰 보상을 위해서 공부를 하는 것이 낫다고 판단하여 시험공부를 하는 것이다.</p>
<p>보상은 사람이 정하는 하이퍼 파라매터이다. 따라서 에이전트가 수행해야할 일에 따라서 적절하게 정해야한다. 가령 격자모델 예시에서 격자가 미로이고 에이전트가 미로를 탈출하는 로봇이라면 한 칸을 이동할 때마다 $-1$의 보상, 터미널 스테이트에 도착하면 $+10$의 보상을 주는 식으로 정할 수 있다. 격자가 공원이고 에이전트가 애완동물을 산책시키는 로봇이라면 한 칸을 이동할 때 마다 $0$의 보상, 터미널 스테이트에 도착하면 $+10$의 보상을 주는 식으로 정할 수 있다.</p>
<h3 id="환경">환경</h3>
<p><strong>환경</strong><sup>environment</sup>은 에이전트가 주어진 상태에서 선택한 행동에 따라 다음 상태와 보상을 결정하는 함수, 즉 $f : (s,a) \mapsto (s^{\prime},r)$이다. 따라서 항상 현실에 딱 들어맞는 비유를 찾기는 어렵다.</p>
<p>타임스텝이 $t$일 때의 상태를 $s_{t}$, $s_{t}$에서 선택한 행동을 $a_{t}$라고 하자. 이에 따라 환경이 결정한 다음 상태를 $s_{t+1}$, 보상을 $r_{t+1}$라고 하면 다음과 같이 나타낸다.</p>
<p>$$
f(s_{t}, a_{t}) = (s_{t+1}, r_{t+1})
$$</p>
<p>격자모델 예시에 대해서 구체적으로 설명하면 다음과 같다. 에이전트가 $\boxed{7}$에서 $\uparrow$를 선택하여 환경이 다음 상태 $\boxed{3}$와 보상 $-1$를 결정했다면 다음과 같은 수식으로 나타낸다.</p>
<p>$$
f(s_{7}, a_{1}) = (s_{3}, -1)
$$</p>
<p>에이전트가 행동을 결정하는 전략을 <strong>정책</strong>이라고 부른다면, 환경이 다음 상태와 보상을 결정하는 것을 <strong>MDP</strong><sup>markov decision process, 마코프 결정 과정</sup>라 한다. 에이전트와 환경의 상호작용을 그림으로 나타내면 다음과 같다.</p>
<p><img src="3.PNG#center" alt="3.PNG"></p>
<h3 id="에피소드">에피소드</h3>
<p>에이전트와 환경이 상호작용하면서 결정된 상태, 행동, 보상의 수열을 <strong>경로</strong><sup>trajectory, 궤적</sup> 혹은 <strong>히스토리</strong><sup>history</sup> 이라고 한다. 경로가 유한한 경우를 <strong>episode task</strong>라고 한다. 위에서 예로든 시험기간, 바둑, 격자모델 모두 이에 해당한다.</p>
<p>$$
s_{0}, a_{0}, s_{1}, r_{1}, a_{1}, s_{2}, r_{2}, \dots, a_{T-1}, s_{T}, r_{T} \\
\text{or} \\
(s_{0},) \overset{a_{0}}{\to} (s_{1}, r_{1}) \overset{a_{1}}{\to} (s_{2}, r_{2}) \overset{a_{2}}{\to} \cdots \overset{a_{T-1}}{\to} (s_{T}, r_{T})
$$</p>
<p>경로가 무한한 경우를 <strong>continuing task</strong>라고 한다. 다만 아주 긴 시간동안 지속되는 에피소드는 무한한 경우라고 간주 하기도 한다.</p>
<p>$$
s_{0}, a_{0}, s_{1}, r_{1}, a_{1}, s_{2}, r_{2}, \dots, a_{t-1}, s_{t}, r_{t}, a_{t}, s_{t+1}, r_{t+1},\dots \\
\text{or} \\
(s_{0},) \overset{a_{0}}{\to} (s_{1}, r_{1}) \overset{a_{1}}{\to} (s_{2}, r_{2}) \overset{a_{2}}{\to} \cdots \overset{a_{t-1}}{\to} (s_{t}, r_{t}) \overset{a_{t}}{\to} (s_{t+1}, r_{t+1}) \overset{a_{t+1}}{\to} \cdots
$$</p>
<!-- $$
P(X\_{n})
$$ -->
<!-- ## Major Components of an RL Agent
- Policy: 강화학습의 궁극적인 목표. 최적의 policy를 찾는 것이 강화학습에서 하는 일이다.
  - notaiton $\pi$
  - 결정적 정책 $a = \pi (s)$: 최적의 정책은 이렇게 생김 
  - 확률적 정책 $\pi (a | s) = P(A\_{t} = a | S\_{t} = s)$: 실제 강화학습에서 사용하는 모델
- Value function: 최적의 policy라는 것은, Value function을 최대화하는 폴리시를 말하는 것. "장기적인 관점에서" 어떻게 하는게 좋은가?
  - 강화학습에서의 cost function
  - $v\_{\pi}(s) = E\_{\pi}(R\_{t+1} + \gamma R\_{t+2} + \gamma^{2} R\_{t+3} + \cdots | S\_{t} = s)$ $s$마다 취할 수 있는 $a$가 랜덤이기 때문에 expectation으로 나타난다. deterministic이면 $E$가 필요없다.
  - 


## 그 외

가치 함수




## 러닝과 플래닝


## 모험과 활용
exploration vs exploitation

## 동적 프로그래밍

policy iteration
value iteration -->
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>오일석, 기계 학습(MACHINE LEARNING). 2017, p466-480&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>


<aside style="text-align: right;">
    2021-02-04&emsp;
    전기현&emsp;
    
    <a href="../1498">🎲 3029</a>
</aside>



<script>
  document.addEventListener('DOMContentLoaded', () => {
    
    const contentBox = document.querySelector('.content-box');
    if (contentBox) {
      renderKaTex(contentBox);
    }
    const tex = document.querySelector('.tex');
    if (tex) {
      renderKaTex(tex);
    }

    var title = '머신러닝에서 강화학습이란';
    var link = 'https:\/\/freshrimpsushi.github.io\/ko\/posts\/3029\/';
    var arr = new Array();
    var obj = {
      "title": title,
      "link": link
    };
    var postList = JSON.parse(localStorage.getItem('latelyViewPostList'));
    if (postList == '' || postList == null || postList == undefined || postList == 0 || postList == NaN) {
      arr.push(obj);
      localStorage.setItem('latelyViewPostList', JSON.stringify(arr));
    } else {
      var listSize = postList.length;
      for (var i = 0; i < listSize; i++) {
        if (title == postList[i].title) {
          postList.splice(i, 1);
          break;
        }
      }
      arr = postList;
      arr.push(obj);
      if (arr.length > 5) {
        arr.shift();
      }
      localStorage.setItem('latelyViewPostList', JSON.stringify(arr));
    }
  });
</script>

      </div>
      <h2>댓글</h2>
<div class="area-reply">
  <div class="list-reply">
  </div>
</div>


<div class="write-box">
  <div class="write-author-info box-account">
    <input type="hidden" name="cmt_idx" />
    <input class="ai-author" type="text" value="" placeholder="Name" />
    <input class="ai-password" type="password" value="" maxlength="20" placeholder="Password" />
  </div>
  <div class="write-content">
    <textarea class="ai-content" value="" placeholder="Comment

 - Feel free to ask in english
 - 日本語でも構いませんが、できれば英語でお願いします
 - 웨일 브라우저 기준 V3.23.214.10 이후 버전에서 덧글 노출이 안되는 현상이 확인 되었습니다.
   - 설정 → 기본 → 클린 웹 → 추적 방지(사용안함)으로 설정하면 댓글이 정상출력됩니다." style="IME-MODE:active;"></textarea>
  </div>
  <div class="write-button">
    <input class="write_comment" type="submit" value="등록" onclick="write_comment();" />
  </div>
  <aside class="tex" style="text-align: center;">
    댓글에도 $\TeX$이 적용됩니다.</aside>
</div>

<script>
  let commentRows = [];
  const listReply = document.querySelector('.list-reply');

  document.addEventListener('DOMContentLoaded', () => {
    get_all_comment();
  });

  function get_all_comment() {
    fetch('https://api64.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {return data.ip})
      .then(ip => {
        const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=getAllComment';
        return postFetch(url, {
                board_idx: '3029',
                user_ip: ip
              });
      })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          commentRows = data.rows;
          render_comment(commentRows);
        }
      })
      .catch(err => console.error(err));
  }

  function render_comment(rows) {
    const badgeExceptionArr = ['류대식', '전기현', 'ㅇㅇ', '질문'];
    const adminExceptionArr = ['류대식', '전기현'];
    render_blank();
    let html = '';
    rows.map(row => {
      html += `<div id="comment${row.cmt_idx}" class="parents">`;
      html += `<div class="content-info">`;
      
      let badge = '';
      if (row.cmt_cnt > 125) {
        badge = '🥇';
      } else if (row.cmt_cnt > 25) {
        badge = '🥈';
      } else if (row.cmt_cnt > 5) {
        badge = '🥉';
      } else { }

      if (badgeExceptionArr.includes(row.author)) {
        badge = '';
      }

      let ipAddress = '';
      if (row.ip_address == null) {
        ipAddress = '(-)';
      } else {
        ipAddress = `(${row.ip_address})`;
      }

      if(adminExceptionArr.includes(row.author)) {
        ipAddress = '';
      }
      
      html += `<div class="list-author">${badge} ${row.author} ${ipAddress}</div>`;
      html += `<div class="list-bridge">▶</div>`;
      if(row.approve) {
        html += `<div class="list-date">${row.datetime}</div>`;
      } else {
        html += `<div class="list-date">${row.datetime} - 관리자의 승인을 기다리고 있습니다</div>`;
      }
      html += `<div class="list-button">`;
      html += `<div class="list-update-button" onclick="update_comment('${row.cmt_idx}', 'parents');">수정</div>`;
      html += `<div class="list-delete-button" onclick="delete_comment('${row.cmt_idx}', 'parents');">삭제</div>`;
      html += `</div>`; 
      html += `</div>`; 
      let content = row.content;
      content = content.replace(/\n/g, '<br />');
      html += `<div class="content-text">${content}</div>`;
      html += `<div class="re-comment"><span class="re-comment-button" onclick="re_comment('${row.cmt_idx}');">답글</span></div>`;
      html += `</div>`;

      row.child.map(child => {
        html += `<div id="comment${child.cmt_idx}" class="child">`;
        html += `<div class="content-info">`;
        
        let badge = '';
        if (child.cmt_cnt > 5) {
          badge = '🥉';
        } else if (child.cmt_cnt > 25) {
          badge = '🥈';
        } else if (child.cmt_cnt > 125) {
          badge = '🥇';
        } else { }

        if (badgeExceptionArr.includes(child.author)) {
          badge = '';
        }

        let ipAddress = '';
        if (child.ip_address == null) {
          ipAddress = '(-)';
        } else {
          ipAddress = `(${child.ip_address})`;
        }

        if(adminExceptionArr.includes(child.author)) {
          ipAddress = '';
        }

        html += `<div class="list-author">${badge} ${child.author} ${ipAddress}</div>`;
        html += `<div class="list-bridge">▶</div>`;
        if(child.approve) {
          html += `<div class="list-date">${child.datetime}</div>`;
        } else {
          html += `<div class="list-date">${child.datetime} - 관리자의 승인을 기다리고 있습니다</div>`;
        }
        html += `<div class="list-button">`;
        html += `<div class="list-update-button" onclick="update_comment('${child.cmt_idx}', 'child');">수정</div>`;
        html += `<div class="list-delete-button" onclick="delete_comment('${child.cmt_idx}', 'child');">삭제</div>`;
        html += `</div>`; 
        html += `</div>`; 
        let content = child.content;
        content = content.replace(/\n/g, '<br />');
        html += `<div class="content-text">${content}</div>`;
        html += `</div>`;
      });
    });
    listReply.innerHTML = html;
    renderKaTex(listReply);
    if(location.href.indexOf('#') != -1) {
      location.href=location.href.substr(location.href.indexOf('#'));
  }
  }

  function render_blank() {
    listReply.innerHTML = '';
  }

  
  function write_comment() {
    const inputAuthor = document.querySelector('.ai-author');
    const inputPassword = document.querySelector('.ai-password');
    const inputContent = document.querySelector('.ai-content');

    const author = inputAuthor.value;
    const password = inputPassword.value;
    const content = inputContent.value;

    if (author === '' || password === '' || content === '') {
      alert('빈칸을 채워주세요');
      return;
    }
    const idx = '3029';
    const board_slug = 'reinforcement-learning-in-machine-learning';
    const board_title = '머신러닝에서 강화학습이란';

    fetch('https://api64.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {return data.ip})
      .then(ip => {
        const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=writeComment';
        return postFetch(url, {
                board_idx: idx,
                board_slug: board_slug,
                board_title: board_title,
                author: author.replace(/\+/g, "%2B"),
                password: password,
                content: content.replace(/\+/g, "%2B"),
                user_ip: ip
              });
      })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          commentRows.push(data.row);
          render_comment(commentRows);
          inputAuthor.value = '';
          inputPassword.value = '';
          inputContent.value = '';
        } else {
          if (data.status === 606) {
            Swal.fire('Warning!\n지속적인 도배 시도시\nIP가 차단될 수 있습니다.');
            inputAuthor.value = '';
            inputPassword.value = '';
            inputContent.value = '';
          } else if (data.status === 607) {
            alert('지나친 댓글 도배를 확인하여\n접근을 차단합니다.');
            window.location.href = 'https://google.com';
          } else {}
        }
      })
      .catch(err => console.error(err));
  }

  
  async function update_comment(cmt_idx, type) {
    const { value: password } = await Swal.fire({
      title: '댓글 수정',
      input: 'password',
      inputPlaceholder: '글 작성 시 입력했던 패스워드를 입력하세요',
      inputAttributes: {
        maxlength: 20,
        autocapitalize: 'off',
        autocorrect: 'off'
      }
    });

    if (password) {
      const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=checkPassword';
      postFetch(url, {
        cmt_idx: cmt_idx,
        password: password
      })
        .then(res => res.json())
        .then(data => {
          if (data.ok) {
            const commnetHtml = document.querySelector(`#comment${cmt_idx}`);
            const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=getComment';
            postFetch(url, {
              cmt_idx: cmt_idx
            })
              .then(res => res.json())
              .then(data => {
                if (data.ok) {
                  const row = data.row;
                  const author = row.author;
                  const content = row.content;
                  let html = '';
                  html += `<div class="update-author-info">`;
                  html += `<input class="update-author" type="text" value="${author}" placeholder="이름" />`;
                  html += `<input class="update-password" type="password" value="${password}" placeholder="비밀번호" disabled />`;
                  html += '</div>';
                  html += `<textarea class="update-content" value="" style="IME-MODE:active;">${content}</textarea>`;
                  html += `<input class="update_comment-button" type="submit" value="수정" onclick="update_comment_click(${cmt_idx}, '${type}')" />`;
                  html += `<input class="update_comment-button" type="submit" value="취소" onclick="cancel_click(${cmt_idx})" />`;
                  commnetHtml.innerHTML = html;
                }
              })
              .catch(err => console.error(err));
          } else {
            Swal.fire('패스워드 일치 오류');
          }
        })
        .catch(err => console.error(err));
    }
  }

  
  async function delete_comment(cmt_idx, type) {
    const { value: password } = await Swal.fire({
      title: '댓글 삭제',
      text: "삭제하면 되돌릴 수 없습니다.",
      input: 'password',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      inputPlaceholder: '글 작성 시 입력했던 패스워드를 입력하세요',
      inputAttributes: {
        maxlength: 20,
        autocapitalize: 'off',
        autocorrect: 'off'
      }
    });

    if (password) {
      const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=checkPassword';
      postFetch(url, {
        cmt_idx: cmt_idx,
        password: password
      })
        .then(res => res.json())
        .then(data => {
          if (data.ok) {
            const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=deleteComment';
            postFetch(url, {
              cmt_idx: cmt_idx
            })
              .then(res => res.json())
              .then(data => {
                Swal.fire('삭제되었습니다.');
                if (type === 'parents') {
                  commentRows = commentRows.filter((row) => row.cmt_idx !== cmt_idx);
                } else if (type === 'child') {
                  commentRows.map((row) => {
                    row.child = row.child.filter((childRow) => childRow.cmt_idx !== cmt_idx);
                    row.child_cnt = row.child.length;
                  });
                } else { }
                render_comment(commentRows);
              })
              .catch(err => console.error(err));
          } else {
            Swal.fire('패스워드 일치 오류');
          }
        })
        .catch(err => console.error(err));
    }
  }

  
  function update_comment_click(cmt_idx, type) {
    const inputAuthor = document.querySelector(`#comment${cmt_idx} .update-author`);
    const inputPassword = document.querySelector(`#comment${cmt_idx} .update-password`);
    const inputContent = document.querySelector(`#comment${cmt_idx} .update-content`);

    const author = inputAuthor.value;
    const password = inputPassword.value;
    const content = inputContent.value;

    if (author === '' || password === '' || content === '') {
      alert('빈칸을 채워주세요');
    }

    const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=updateComment';
    postFetch(url, {
      cmt_idx: cmt_idx,
      author: author.replace(/\+/g, "%2B"),
      password: password,
      content: content.replace(/\+/g, "%2B")
    })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          Swal.fire('수정되었습니다.');
          if (type === 'parents') {
            commentRows.map((row) => {
              if (row.cmt_idx == cmt_idx) {
                row.author = data.author;
                row.content = data.content;
              }
            });
          } else if (type === 'child') {
            commentRows.map((row) => {
              if (row.cmt_idx == data.parent_cmt_idx) {
                row.child.map((child) => {
                  if (child.cmt_idx == cmt_idx) {
                    child.author = data.author;
                    child.content = data.content;
                  }
                });
              }
            });
          } else { }
          render_comment(commentRows);
          recentRows.map((row) => {
            if (row.cmt_idx == cmt_idx) {
              row.author = data.author;
              row.content = data.content;
            }
          });
          render_recent_comment(recentRows);
        }
      })
      .catch(err => console.error(err));
  }

  
  function cancel_click() {
    render_comment(commentRows);
  }

  
  function re_comment(cmt_idx) {
    const reComment = document.querySelector(`#comment${cmt_idx} .re-comment`);
    let html = '';
    html += '<div class="re-comment-box">';
    html += '<div class="re-comment-author-info">';
    html += '<input class="re-comment-author" type="text" value="" placeholder="이름" />';
    html += '<input class="re-comment-password" type="password" value="" placeholder="비밀번호" />';
    html += '</div>';
    html += '<textarea class="re-comment-content" placeholder="내용" value="" style="IME-MODE:active;"></textarea>';
    html += `<input class="re-comment-btn" type="submit" value="등록" onclick="re_comment_click(${cmt_idx})" />`;
    html += `<input class="re-comment-btn" type="submit" value="취소" onclick="cancel_click(${cmt_idx})" />`;
    html += '</div>';

    reComment.innerHTML = html;
  }

  function re_comment_click(cmt_idx) {
    const inputAuthor = document.querySelector(`#comment${cmt_idx} .re-comment-author`);
    const inputPassword = document.querySelector(`#comment${cmt_idx} .re-comment-password`);
    const inputContent = document.querySelector(`#comment${cmt_idx} .re-comment-content`);

    const author = inputAuthor.value;
    const password = inputPassword.value;
    const content = inputContent.value;

    if (author === '' || password === '' || content === '') {
      alert('빈칸을 채워주세요');
      return;
    }

    const board_idx = '3029';
    const board_slug = 'reinforcement-learning-in-machine-learning';
    const board_title = '머신러닝에서 강화학습이란';

    fetch('https://api64.ipify.org?format=json')
      .then(res => res.json())
      .then(data => {return data.ip})
      .then(ip => {
        const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/comment.php?action=writeReComment';
        return postFetch(url, {
                board_idx: board_idx,
                board_slug: board_slug,
                board_title: board_title,
                cmt_idx: cmt_idx,
                author: author.replace(/\+/g, "%2B"),
                password: password,
                content: content.replace(/\+/g, "%2B"),
                user_ip: ip
              });
      })
      .then(res => res.json())
      .then(data => {
        if (data.ok) {
          commentRows.map((row) => {
            if (row.cmt_idx == cmt_idx) {
              row.child.push(data.row);
            }
          });
          render_comment(commentRows);
        } else {
          if (data.status == 606) {
            Swal.fire('Warning!\n지속적인 도배 시도시\nIP가 차단될 수 있습니다.');
            inputAuthor.value = '';
            inputPassword.value = '';
            inputContent.value = '';
          } else if (data.status === 607) {
            alert('지나친 댓글 도배를 확인하여\n접근을 차단합니다.');
            window.location.href = 'https://google.com';
          } else {}
        }
      })
      .catch(err => console.error(err));
  }

</script>
    </div>
    <aside>
<div class="sidebar">


<div class="category">
</div>

<aside style="display:flex;">

● 를 클릭해서 관심있는 분야만 강조해보세요.

      <div class="resetmute">
        <button class="sb-btn btnReset"
          style = "border-radius:5px; border:0px">reset</button>
        <button class="sb-btn btnMute"
          style = "border-radius:5px; border:0px">mute</button>
      </div>
</aside>


 

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  



<script>
  const color = {green: '#33cc33', yellow: '#ffcc00', red: '#ff3333', black: '#000000'};
  const categoryRows = [
    [
      { idx: 1, name: '함수', color: color.red, show: '함수', size: '117'},
      { idx: 2, name: '보조정리', color: color.red, show: '보조정리', size: '29'},
      { idx: 3, name: '집합론', color: color.green, show: '집합론', size: '47'},
      { idx: 4, name: '정수론', color: color.red, show: '정수론', size: '89'},
      { idx: 5, name: '기하학', color: color.red, show: '기하학', size: '147'},
      { idx: 6, name: '행렬대수', color: color.red, show: '행렬대수', size: '91'},
      { idx: 7, name: '선형대수', color: color.red, show: '선형대수', size: '93'},
      { idx: 8, name: '추상대수', color: color.red, show: '추상대수', size: '92'},
      { idx: 9, name: '위상수학', color: color.red, show: '위상수학', size: '64'},
      { idx: 10, name: '그래프이론', color: color.red, show: '그래프이론', size: '57'}
    ],
    [
      { idx: 1, name: '해석개론', color: color.red, show: '해석개론', size: '97'},
      { idx: 2, name: '다변수벡터해석', color: color.red, show: '다변수벡터해석', size: '22'},
      { idx: 3, name: '복소해석', color: color.red, show: '복소해석', size: '71'},
      { idx: 4, name: '측도론', color: color.red, show: '측도론', size: '53'},
      { idx: 5, name: '푸리에해석', color: color.red, show: '푸리에해석', size: '52'},
      { idx: 6, name: '초함수론', color: color.red, show: '초함수론', size: '23'},
      { idx: 7, name: '단층촬영', color: color.red, show: '단층촬영', size: '20'},
    ],
    [
      { idx: 1, name: '거리공간', color: color.red, show: '거리공간', size: '38'},
      { idx: 2, name: '바나흐공간', color: color.red, show: '바나흐공간', size: '39'},
      { idx: 3, name: '힐베르트공간', color: color.red, show: '힐베르트공간', size: '31'},
      { idx: 4, name: '르벡공간', color: color.red, show: '르벡공간', size: '33'}
    ],
    [
      { idx: 1, name: '상미분방정식', color: color.red, show: '상미분방정식', size: '58'},
      { idx: 2, name: '편미분방정식', color: color.red, show: '편미분방정식', size: '59'},
      { idx: 3, name: '확률미분방정식', color: color.red, show: '확률미분방정식', size: '26'}
    ],
    [
      { idx: 1, name: '매트랩', color: color.green, show: '매트랩', size: '16'},
      { idx: 2, name: '수치해석', color: color.red, show: '수치해석', size: '55'},
      { idx: 3, name: '최적화이론', color: color.red, show: '최적화이론', size: '37'}
    ],
    [
      { idx: 1, name: '물리학', color: color.red, show: '물리학', size: '17'},
      { idx: 2, name: '수리물리', color: color.red, show: '수리물리', size: '73'},
      { idx: 3, name: '고전역학', color: color.red, show: '고전역학', size: '47'},
      { idx: 4, name: '전자기학', color: color.red, show: '전자기학', size: '51'},
      { idx: 5, name: '양자역학', color: color.red, show: '양자역학', size: '51'},
      { idx: 6, name: '열물리학', color: color.red, show: '열물리학', size: '29'}
    ],
    [
      { idx: 1, name: 'R', color: color.green, show: 'R', size: '53'},
      { idx: 2, name: '데이터확보', color: color.red, show: '데이터확보', size: '22'},
      { idx: 3, name: '데이터과학', color: color.red, show: '데이터과학', size: '24'},
      { idx: 4, name: '통계적검정', color: color.red, show: '통계적검정', size: '22'},
      { idx: 5, name: '통계적분석', color: color.red, show: '통계적분석', size: '71'},
      { idx: 6, name: '수리통계학', color: color.red, show: '수리통계학', size: '110'},
      { idx: 7, name: '확률분포론', color: color.red, show: '확률분포론', size: '71'},
      { idx: 8, name: '확률론', color: color.red, show: '확률론', size: '74'},
      { idx: 9, name: '위상데이터분석', color: color.red, show: '위상데이터분석', size: '40'}
    ],
    [
      { idx: 1, name: '줄리아', color: color.green, show: '줄리아', size: '191'},
      { idx: 2, name: '프로그래밍', color: color.red, show: '프로그래밍', size: '56'},
      { idx: 3, name: '알고리즘', color: color.red, show: '알고리즘', size: '28'},
      { idx: 4, name: '머신러닝', color: color.red, show: '머신러닝', size: '83'},
      { idx: 5, name: '세이버메트릭스', color: color.red, show: '세이버메트릭스', size: '191', size: '12'},
      { idx: 6, name: '논문작성', color: color.red, show: '논문작성', size: '20'},
      { idx: 7, name: '교과과정', color: color.red, show: '교과과정', size: '54'},
      { idx: 8, name: '생새우초밥지', color: color.black , show: '생새우초밥지', size: '3'}
    ]
  ];

  document.addEventListener('DOMContentLoaded', () => {
    const blindList = JSON.parse(localStorage.getItem('blindList'));
    if (blindList == '' || blindList == null || blindList == undefined || blindList == 0 || blindList == NaN) {
      localStorage.setItem('blindList', null);
    }
    render_category(categoryRows);

    blind_category(blindList);

    const btnReset = document.querySelector('.btnReset');
    btnReset.addEventListener('click', () => {
      let arr = new Array();
      localStorage.setItem('blindList', JSON.stringify(arr));
      blind_category(arr);
    });

    const btnMute = document.querySelector('.btnMute');
    btnMute.addEventListener('click', () => {
      let arr = new Array();
      for(let i = 0; i < categoryRows.length; i++) {
        categoryRows[i].map(row => {
          const data = {mainIdx: i, subIdx: row.idx};
          arr.push(data);
        });
      }
      localStorage.setItem('blindList', JSON.stringify(arr));
      blind_category(arr);
    });
  });

  function render_category(rows)
  {
    const category = document.querySelector('.category');
    let html = '';
    for(let i = 0; i < rows.length; i++) {
      rows[i].map(row => {
        html += `<span id="cate${i}-${row.idx}" class="cate etewsert">`;
        html += `<span onclick="check_blind(${i}, ${row.idx});" style="cursor: pointer; color: ${row.color}">●</span>`;
        html += `<a href="https:\/\/freshrimpsushi.github.io\/ko\/categories/${row.name.toLowerCase()}/">`; 
        html += ` ${row.show} (${row.size})</a>`;
        html += '</span>';
        if(screen.width > 954) {html += '<br>'} else {html += ' '}
      });
      html += '<hr>';
    }

    category.innerHTML = html;
  }

   
  function check_blind(mainIdx, subIdx)
  {
    const cateDiv = document.querySelector(`#cate${mainIdx}-${subIdx}`);
    let arr = new Array();
    const data = {mainIdx, subIdx};
    let blindList = JSON.parse(localStorage.getItem('blindList'));
    if (blindList == '' || blindList == null || blindList == undefined || blindList == 0 || blindList == NaN) {
      arr.push(data);
      localStorage.setItem('blindList', JSON.stringify(arr));
      cateDiv.className += ' blind';
    } else {
      arr = blindList;
      let tempArr = null;
      for(let i = 0; i < arr.length; i++) {
        if(arr[i].mainIdx == mainIdx && arr[i].subIdx == subIdx) {
          tempArr = arr.filter(a => a.mainIdx != mainIdx || a.subIdx != subIdx);
          break;
        }
      }
      
      if(tempArr === null) {
        arr.push(data);
        localStorage.setItem('blindList', JSON.stringify(arr));
        cateDiv.className += ' blind';
      } else {
        localStorage.setItem('blindList', JSON.stringify(tempArr));
        cateDiv.className = 'cate';
      }
    }
  }

   
  function blind_category(blindList)
  {
    const cateDiv = document.querySelectorAll('.cate');
    cateDiv.forEach(div => {
      div.className = 'cate';
    });
    if(blindList !== null) {
      blindList.map(list => {
        const blindDiv = document.querySelector(`#cate${list.mainIdx}-${list.subIdx}`);
        blindDiv.className += ' blind';
      });
    }
  }
</script>
<p><b> 최근 본 포스트 </b></p>

<aside>
  <div class="lately-viewed-list" style="padding-left: 4px;">
  </div>
</aside>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const postList = JSON.parse(localStorage.getItem('latelyViewPostList'));

    const list = document.querySelector('.lately-viewed-list');
    let html = '';
    if (postList == '' || postList == null || postList == undefined || postList == 0 || postList == NaN) {
      localStorage.setItem('latelyViewPostList', null);
      html += '<div class="lv-list">';
      html += ' · 열람한 포스트가 없습니다.';
      html += '</div>';
      list.innerHTML = html;
    } else {
      for (let i = (postList.length - 1); i >= 0; i--) {
        html += '<div class="lv-list">';
        html += `<a href="${postList[i].link}"> · ${postList[i].title}</a>`;
        html += '</div>';
      }
      list.innerHTML = html;
    }
  });
</script>
<aside>
  <p><b> 최신 댓글 </b></p>
  <div class="current-reply">
  </div>
</aside>

<script>
  const url = 'https:\/\/freshrimpsushi.com\/blog\/ajax/recent_comment.php?action=getCurrentComment';
  let recentRows = []; 
  fetch(url)
    .then(res => res.json())
    .then(data => {
      if (data.ok) {
        recentRows = data.rows;
        render_recent_comment(recentRows);
      }
    })
    .catch(err => console.error(err));

  
  function render_recent_comment(rows) {
    const currentReply = document.querySelector('.current-reply');
    let html = '';
    rows.map(row => {
      let link = 'https:\/\/freshrimpsushi.github.io\/ko\/';
      if (row.board_idx > -1) {
        
        
        link += `posts/${row.board_idx}#comment${row.cmt_idx}`;
      } else if (row.board_idx == -1) {
        link += `#comment${row.cmt_idx}`;
      } else {
        link += `categories/${row.board_title}#comment${row.cmt_idx}`;
      }
      html += '<div class="current-reply-list">';
      html += `<a href="${link}">`;
      html += `<b> - ${row.author}</b>: `;
      html += `${row.content}`;
      html += `</a>`;
      html += `</div>`;
    });
    currentReply.innerHTML = html;
    renderKaTex(currentReply);
  }
</script>
</div>
</aside>
  </div>
  
  <footer>
  <aside>
    <div>
      <p style="text-align: center">© 생새우초밥집 / Powered by 류대식, 전기현</p>
      <p style="text-align: center"><img src=https://freshrimpsushi.github.io/ko/logo/gmail.png width=16px> Contact:
        freshrimpsushi@gmail.com<br>
        
      </p>
    </div>

    
    
    
  </aside>
</footer>

  

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/katex.min.js"
  integrity="sha512-5ufNcHqOYgilGEHPfuRIQ5B/vDS1M8+UC+DESZ5CwVgGTg+b2Ol/15rYL/GiCWJ/Sx8oVo0FPFok1dPk8U9INQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/contrib/auto-render.min.js"
  integrity="sha512-ZA/RPrAo88DlwRnnoNVqKINnQNcWERzRK03PDaA4GIJiVZvGFIWQbdWCsUebMZfkWohnfngsDjXzU6PokO4jGw=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  
  function renderKaTex(target) {
    renderMathInElement(target, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
      ],
      trust: true,
      trust: (context) =>
        ["\\htmlId", "\\href", "\\includegraphics"].includes(context.command),
      macros: {
        "\\eqref": "(\\text{#1})",
        "\\ref": "\\href{###1}{\\text{#1}}",
        "\\label": "\\htmlId{#1}{}",
        "\\sech": "\\operatorname{sech}",
        "\\sgn": "\\operatorname{sgn}",
        "\\sign": "\\operatorname{sign}",
        "\\sinc": "\\operatorname{sinc}",
        "\\diag": "\\operatorname{diag}",
        "\\diam": "\\operatorname{diam}",
        "\\Tr": "\\operatorname{Tr}",
        "\\tr": "\\operatorname{tr}",
        "\\Re": "\\operatorname{Re}",
        "\\Im": "\\operatorname{Im}",
        "\\Var": "\\operatorname{Var}",
        "\\Poi": "\\operatorname{Poi}",
        "\\Cov": "\\operatorname{Cov}",
        "\\span": "\\operatorname{span}",
        "\\supp": "\\operatorname{supp}",
        "\\rank": "\\operatorname{rank}",
        "\\nullity": "\\operatorname{nullity}",
        "\\Ric": "\\operatorname{Ric}",
        "\\i": "\\mathrm{i}",
        "\\d": "\\mathrm{d}",
        "\\cR": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2202/2615581243_1645770096.5863.png}",
        "\\acR": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680634690.4371.png}",
        "\\bcR": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2202/2615581243_1645770096.5899.png}",
        "\\abcR": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680634690.0596.png}",
        "\\crH": "\\includegraphics[height=0.8em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680622958.7632.png}",
        "\\smallcrH": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680622958.7632.png}",
        "\\acrH": "\\includegraphics[height=0.8em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680634690.8386.png}",
        "\\smallacrH": "\\includegraphics[height=0.6em]{https://freshrimpsushi.com/community/data/editor/2304/2175452104_1680634690.8386.png}",
      },
      throwOnError: false,
    });
  }
</script>
</body>

</html>